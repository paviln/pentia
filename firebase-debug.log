[debug] [2022-08-12T13:40:32.962Z] ----------------------------------------------------------------------
[debug] [2022-08-12T13:40:32.964Z] Command:       C:\Program Files\nodejs\node.exe C:\Program Files\nodejs\node_modules\firebase-tools\lib\bin\firebase.js emulators:start --import=firebase-export --export-on-exit=firebase-export
[debug] [2022-08-12T13:40:32.964Z] CLI Version:   11.6.0
[debug] [2022-08-12T13:40:32.964Z] Platform:      win32
[debug] [2022-08-12T13:40:32.964Z] Node Version:  v16.14.2
[debug] [2022-08-12T13:40:32.965Z] Time:          Fri Aug 12 2022 15:40:32 GMT+0200 (Central European Summer Time)
[debug] [2022-08-12T13:40:32.965Z] ----------------------------------------------------------------------
[debug] 
[debug] [2022-08-12T13:40:33.040Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2022-08-12T13:40:33.040Z] > authorizing via signed-in user (foresight7100@gmail.com)
[debug] [2022-08-12T13:40:33.124Z] java version "17.0.2" 2022-01-18 LTS
Java(TM) SE Runtime Environment (build 17.0.2+8-LTS-86)

[debug] [2022-08-12T13:40:33.125Z] Java HotSpot(TM) 64-Bit Server VM (build 17.0.2+8-LTS-86, mixed mode, sharing)

[debug] [2022-08-12T13:40:33.140Z] Parsed Java major version: 17
[info] i  emulators: Starting emulators: auth, functions, firestore, storage {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: auth, functions, firestore, storage"}}
[debug] [2022-08-12T13:40:33.151Z] [hub] writing locator at C:\Users\pavil\AppData\Local\Temp\hub-pentia-1e4eb.json
[warn] !  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: database, hosting, pubsub, eventarc {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mdatabase, hosting, pubsub, eventarc\u001b[22m"}}
[info] +  functions: Using node@16 from host. {"metadata":{"emulator":{"name":"functions"},"message":"Using node@16 from host."}}
[debug] [2022-08-12T13:40:33.174Z] defaultcredentials: writing to file C:\Users\pavil\AppData\Roaming\firebase\foresight7100_gmail_com_application_default_credentials.json
[debug] [2022-08-12T13:40:33.176Z] Setting GAC to C:\Users\pavil\AppData\Roaming\firebase\foresight7100_gmail_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to C:\\Users\\pavil\\AppData\\Roaming\\firebase\\foresight7100_gmail_com_application_default_credentials.json"}}
[debug] [2022-08-12T13:40:33.178Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/pentia-1e4eb/adminSdkConfig [none]
[debug] [2022-08-12T13:40:33.487Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/pentia-1e4eb/adminSdkConfig 403
[debug] [2022-08-12T13:40:33.488Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/pentia-1e4eb/adminSdkConfig {"error":{"code":403,"message":"The caller does not have permission","status":"PERMISSION_DENIED"}}
[debug] [2022-08-12T13:40:33.488Z] Failed to get Admin SDK config for pentia-1e4eb, falling back to cacheFailed to get Admin SDK for Firebase project pentia-1e4eb. Please make sure the project exists and your account has permission to access it. {"name":"FirebaseError","children":[],"exit":2,"message":"Failed to get Admin SDK for Firebase project pentia-1e4eb. Please make sure the project exists and your account has permission to access it.","original":{"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"The caller does not have permission","status":"PERMISSION_DENIED"}},"response":{"statusCode":403}},"exit":1,"message":"HTTP Error: 403, The caller does not have permission","status":403},"status":500}
[warn] !  firestore: Did not find a Cloud Firestore rules file specified in a firebase.json config file. {"metadata":{"emulator":{"name":"firestore"},"message":"Did not find a Cloud Firestore rules file specified in a firebase.json config file."}}
[warn] !  firestore: The emulator will default to allowing all reads and writes. Learn more about this option: https://firebase.google.com/docs/emulator-suite/install_and_configure#security_rules_configuration. {"metadata":{"emulator":{"name":"firestore"},"message":"The emulator will default to allowing all reads and writes. Learn more about this option: https://firebase.google.com/docs/emulator-suite/install_and_configure#security_rules_configuration."}}
[debug] [2022-08-12T13:40:33.503Z] Ignoring unsupported arg: projectId {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: projectId"}}
[debug] [2022-08-12T13:40:33.503Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2022-08-12T13:40:33.503Z] Starting Firestore Emulator with command {"binary":"java","args":["-Dgoogle.cloud_firestore.debug_log_level=FINE","-Duser.language=en","-jar","C:\\Users\\pavil\\.cache\\firebase\\emulators\\cloud-firestore-emulator-v1.14.4.jar","--host","localhost","--port",8080,"--functions_emulator","localhost:5001"],"optionalArgs":["port","webchannel_port","host","rules","functions_emulator","seed_from_export"],"joinArgs":false} {"metadata":{"emulator":{"name":"firestore"},"message":"Starting Firestore Emulator with command {\"binary\":\"java\",\"args\":[\"-Dgoogle.cloud_firestore.debug_log_level=FINE\",\"-Duser.language=en\",\"-jar\",\"C:\\\\Users\\\\pavil\\\\.cache\\\\firebase\\\\emulators\\\\cloud-firestore-emulator-v1.14.4.jar\",\"--host\",\"localhost\",\"--port\",8080,\"--functions_emulator\",\"localhost:5001\"],\"optionalArgs\":[\"port\",\"webchannel_port\",\"host\",\"rules\",\"functions_emulator\",\"seed_from_export\"],\"joinArgs\":false}"}}
[info] i  firestore: Firestore Emulator logging to firestore-debug.log {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator logging to \u001b[1mfirestore-debug.log\u001b[22m"}}
[debug] [2022-08-12T13:40:39.937Z] Ignoring unsupported arg: port {"metadata":{"emulator":{"name":"storage"},"message":"Ignoring unsupported arg: port"}}
[debug] [2022-08-12T13:40:40.611Z] Temp file directory for storage emulator: C:\Users\pavil\AppData\Local\Temp/firebase/storage/blobs {"metadata":{"emulator":{"name":"storage"},"message":"Temp file directory for storage emulator: C:\\Users\\pavil\\AppData\\Local\\Temp/firebase/storage/blobs"}}
[info] i  ui: downloading ui-v1.9.0.zip... {"metadata":{"emulator":{"name":"ui"},"message":"downloading ui-v1.9.0.zip..."}}
[debug] [2022-08-12T13:40:40.624Z] >>> [apiv2][query] GET https://storage.googleapis.com/firebase-preview-drop/emulator/ui-v1.9.0.zip 
[debug] [2022-08-12T13:40:40.849Z] <<< [apiv2][status] GET https://storage.googleapis.com/firebase-preview-drop/emulator/ui-v1.9.0.zip 200
[debug] [2022-08-12T13:40:40.850Z] <<< [apiv2][body] GET https://storage.googleapis.com/firebase-preview-drop/emulator/ui-v1.9.0.zip [stream]
[info] i  ui: Removing outdated emulator files: ui-v1.6.5 {"metadata":{"emulator":{"name":"ui"},"message":"Removing outdated emulator files: ui-v1.6.5"}}
[info] i  ui: Removing outdated emulator files: ui-v1.6.5.zip {"metadata":{"emulator":{"name":"ui"},"message":"Removing outdated emulator files: ui-v1.6.5.zip"}}
[debug] [2022-08-12T13:40:41.357Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2022-08-12T13:40:41.358Z] Ignoring unsupported arg: port {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: port"}}
[debug] [2022-08-12T13:40:41.358Z] Starting Emulator UI with command {"binary":"node","args":["C:\\Users\\pavil\\.cache\\firebase\\emulators\\ui-v1.9.0\\server\\server.js"],"optionalArgs":[],"joinArgs":false} {"metadata":{"emulator":{"name":"ui"},"message":"Starting Emulator UI with command {\"binary\":\"node\",\"args\":[\"C:\\\\Users\\\\pavil\\\\.cache\\\\firebase\\\\emulators\\\\ui-v1.9.0\\\\server\\\\server.js\"],\"optionalArgs\":[],\"joinArgs\":false}"}}
[info] i  ui: Emulator UI logging to ui-debug.log {"metadata":{"emulator":{"name":"ui"},"message":"Emulator UI logging to \u001b[1mui-debug.log\u001b[22m"}}
[debug] [2022-08-12T13:40:41.608Z] Web / API server started at localhost:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at localhost:4000\n"}}
[info] i  functions: Watching "C:\Users\pavil\source\repos\pentia\functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"C:\\Users\\pavil\\source\\repos\\pentia\\functions\" for Cloud Functions..."}}
[debug] [2022-08-12T13:40:41.632Z] Validating nodejs source
[debug] [2022-08-12T13:40:43.530Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "lib/index.js",
  "dependencies": {
    "firebase-admin": "^10.0.2",
    "firebase-functions": "^3.18.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^0.2.0",
    "typescript": "^4.5.4"
  },
  "private": true
}
[debug] [2022-08-12T13:40:43.530Z] Building nodejs source
[debug] [2022-08-12T13:40:43.530Z] Analyzing nodejs backend spec
[debug] [2022-08-12T13:40:43.532Z] Could not find functions.yaml. Must use http discovery
[debug] [2022-08-12T13:40:44.480Z] Serving at port 9005

[debug] [2022-08-12T13:40:44.841Z] Got response from /__/functions.yaml {"endpoints":{"createUser":{"platform":"gcfv1","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","eventFilters":{"resource":"projects/pentia-1e4eb"},"retry":false},"labels":{},"entryPoint":"createUser"},"sendRoomNotification":{"platform":"gcfv1","eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/pentia-1e4eb/databases/(default)/documents/messages/{docId}"},"retry":false},"labels":{},"entryPoint":"sendRoomNotification"},"removeUser":{"platform":"gcfv1","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.delete","eventFilters":{"resource":"projects/pentia-1e4eb"},"retry":false},"labels":{},"entryPoint":"removeUser"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2022-08-12T13:40:44.847Z] shutdown requested via /__/quitquitquit

[info] +  functions: Loaded functions definitions from source: createUser, sendRoomNotification, removeUser. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: createUser, sendRoomNotification, removeUser."}}
[debug] [2022-08-12T13:40:44.858Z] addAuthTrigger {"eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","resource":"projects/pentia-1e4eb"}}
[info] +  functions[us-central1-createUser]: auth function initialized. {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mauth\u001b[22m function initialized."}}
[debug] [2022-08-12T13:40:44.859Z] addFirestoreTrigger "{\"eventTrigger\":{\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/{docId}\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2022-08-12T13:40:44.859Z] >>> [apiv2][query] PUT http://localhost:8080/emulator/v1/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 [none]
[debug] [2022-08-12T13:40:44.859Z] >>> [apiv2][body] PUT http://localhost:8080/emulator/v1/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 "{\"eventTrigger\":{\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/{docId}\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2022-08-12T13:40:45.329Z] <<< [apiv2][status] PUT http://localhost:8080/emulator/v1/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 200
[debug] [2022-08-12T13:40:45.329Z] <<< [apiv2][body] PUT http://localhost:8080/emulator/v1/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 {}
[info] +  functions[us-central1-sendRoomNotification]: firestore function initialized. {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mfirestore\u001b[22m function initialized."}}
[debug] [2022-08-12T13:40:45.330Z] addAuthTrigger {"eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.delete","resource":"projects/pentia-1e4eb"}}
[info] +  functions[us-central1-removeUser]: auth function initialized. {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mauth\u001b[22m function initialized."}}
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://localhost:4000                │
└─────────────────────────────────────────────────────────────┘

┌────────────────┬────────────────┬─────────────────────────────────┐
│ Emulator       │ Host:Port      │ View in Emulator UI             │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Authentication │ localhost:9099 │ http://localhost:4000/auth      │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Functions      │ localhost:5001 │ http://localhost:4000/functions │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Firestore      │ localhost:8080 │ http://localhost:4000/firestore │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Storage        │ localhost:9199 │ http://localhost:4000/storage   │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Eventarc       │ localhost:9299 │ n/a                             │
└────────────────┴────────────────┴─────────────────────────────────┘
  Emulator Hub running at localhost:4400
  Other reserved ports: 4500

Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2022-08-12T13:46:13.573Z] >>> [apiv2][query] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast [none]
[debug] [2022-08-12T13:46:13.573Z] >>> [apiv2][body] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast {"eventId":"c4f77dc4-d348-4c6c-847f-5f102b711690","eventType":"providers/firebase.auth/eventTypes/user.create","resource":{"name":"projects/pentia-1e4eb","service":"firebaseauth.googleapis.com"},"params":{},"timestamp":"2022-08-12T13:46:13.573Z","data":{"uid":"KmAOS3gtpn7stEaQXeb4A4KLVOgp","email":"paviln97dk@gmail.com","emailVerified":true,"displayName":"Jens Christensen","photoURL":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","metadata":{"lastSignInTime":"2022-08-12T13:46:13.571Z"},"customClaims":{},"providerData":[{"providerId":"google.com","rawId":"116740594955009033783","federatedId":"116740594955009033783","displayName":"Jens Christensen","photoUrl":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","email":"paviln97dk@gmail.com"}]}}
[debug] [2022-08-12T13:46:13.580Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-08-12T13:46:13.580Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-08-12T13:46:13.580Z] Accepted multicast request POST /functions/projects/pentia-1e4eb/trigger_multicast --> us-central1-createUser-0 {"metadata":{"emulator":{"name":"functions"},"message":"Accepted multicast request POST /functions/projects/pentia-1e4eb/trigger_multicast --> us-central1-createUser-0"}}
[debug] [2022-08-12T13:46:13.592Z] [worker-pool] addWorker(us-central1-createUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-createUser)"}}
[debug] [2022-08-12T13:46:13.592Z] [worker-pool] Adding worker with key us-central1-createUser, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-createUser, total=1"}}
[debug] [2022-08-12T13:46:13.593Z] [worker-pool] submitWork(triggerId=us-central1-createUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-createUser)"}}
[debug] [2022-08-12T13:46:13.593Z] [worker-us-central1-createUser-09b6bf9e-9af5-48bf-a44d-c03699d46f7a]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-createUser-09b6bf9e-9af5-48bf-a44d-c03699d46f7a]: BUSY"}}
[debug] [2022-08-12T13:46:13.601Z] <<< [apiv2][status] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast 200
[debug] [2022-08-12T13:46:13.601Z] <<< [apiv2][body] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2022-08-12T13:46:15.064Z] [runtime-status] [2992] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:46:15.067Z] [runtime-status] [2992] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:46:15.068Z] [runtime-status] [2992] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-08-12T13:46:15.069Z] [runtime-status] [2992] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:46:15.129Z] [runtime-status] [2992] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-08-12T13:46:15.129Z] [runtime-status] [2992] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:46:15.130Z] [runtime-status] [2992] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:46:15.131Z] [runtime-status] [2992] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:46:15.132Z] [runtime-status] [2992] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:46:15.132Z] [runtime-status] [2992] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:46:15.132Z] [runtime-status] [2992] Functions runtime initialized. {"cwd":"C:\\Users\\pavil\\source\\repos\\pentia\\functions","node_version":"16.14.2"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\",\"node_version\":\"16.14.2\"}"}}
[debug] [2022-08-12T13:46:15.135Z] [runtime-status] [2992] initializeApp(DEFAULT) {"storageBucket":"pentia-1e4eb.appspot.com","projectId":"pentia-1e4eb"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] initializeApp(DEFAULT) {\"storageBucket\":\"pentia-1e4eb.appspot.com\",\"projectId\":\"pentia-1e4eb\"}"}}
[debug] [2022-08-12T13:46:15.136Z] [runtime-status] [2992] Beginning invocation function createUser! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] Beginning invocation function createUser!"}}
[info] i  functions: Beginning execution of "createUser" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"Beginning execution of \"createUser\""}}
[debug] [2022-08-12T13:46:15.137Z] [runtime-status] [2992] Running createUser in signature event {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] Running createUser in signature event"}}
[debug] [2022-08-12T13:46:15.137Z] [runtime-status] [2992] ProcessBackground {"eventId":"c4f77dc4-d348-4c6c-847f-5f102b711690","eventType":"providers/firebase.auth/eventTypes/user.create","resource":{"name":"projects/pentia-1e4eb","service":"firebaseauth.googleapis.com"},"params":{},"timestamp":"2022-08-12T13:46:13.573Z","data":{"uid":"KmAOS3gtpn7stEaQXeb4A4KLVOgp","email":"paviln97dk@gmail.com","emailVerified":true,"displayName":"Jens Christensen","photoURL":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","metadata":{"lastSignInTime":"2022-08-12T13:46:13.571Z"},"customClaims":{},"providerData":[{"providerId":"google.com","rawId":"116740594955009033783","federatedId":"116740594955009033783","displayName":"Jens Christensen","photoUrl":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","email":"paviln97dk@gmail.com"}]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] ProcessBackground {\"eventId\":\"c4f77dc4-d348-4c6c-847f-5f102b711690\",\"eventType\":\"providers/firebase.auth/eventTypes/user.create\",\"resource\":{\"name\":\"projects/pentia-1e4eb\",\"service\":\"firebaseauth.googleapis.com\"},\"params\":{},\"timestamp\":\"2022-08-12T13:46:13.573Z\",\"data\":{\"uid\":\"KmAOS3gtpn7stEaQXeb4A4KLVOgp\",\"email\":\"paviln97dk@gmail.com\",\"emailVerified\":true,\"displayName\":\"Jens Christensen\",\"photoURL\":\"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c\",\"metadata\":{\"lastSignInTime\":\"2022-08-12T13:46:13.571Z\"},\"customClaims\":{},\"providerData\":[{\"providerId\":\"google.com\",\"rawId\":\"116740594955009033783\",\"federatedId\":\"116740594955009033783\",\"displayName\":\"Jens Christensen\",\"photoUrl\":\"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c\",\"email\":\"paviln97dk@gmail.com\"}]}}"}}
[debug] [2022-08-12T13:46:15.137Z] [runtime-status] [2992] ProcessBackground: lifting resource.name from resource {"name":"projects/pentia-1e4eb","service":"firebaseauth.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/pentia-1e4eb\",\"service\":\"firebaseauth.googleapis.com\"}"}}
[debug] [2022-08-12T13:46:15.137Z] [runtime-status] [2992] RunBackground {"data":{"uid":"KmAOS3gtpn7stEaQXeb4A4KLVOgp","email":"paviln97dk@gmail.com","emailVerified":true,"displayName":"Jens Christensen","photoURL":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","metadata":{"lastSignInTime":"2022-08-12T13:46:13.571Z"},"customClaims":{},"providerData":[{"providerId":"google.com","rawId":"116740594955009033783","federatedId":"116740594955009033783","displayName":"Jens Christensen","photoUrl":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","email":"paviln97dk@gmail.com"}]},"context":{"eventId":"c4f77dc4-d348-4c6c-847f-5f102b711690","eventType":"providers/firebase.auth/eventTypes/user.create","resource":"projects/pentia-1e4eb","params":{},"timestamp":"2022-08-12T13:46:13.573Z"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] RunBackground {\"data\":{\"uid\":\"KmAOS3gtpn7stEaQXeb4A4KLVOgp\",\"email\":\"paviln97dk@gmail.com\",\"emailVerified\":true,\"displayName\":\"Jens Christensen\",\"photoURL\":\"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c\",\"metadata\":{\"lastSignInTime\":\"2022-08-12T13:46:13.571Z\"},\"customClaims\":{},\"providerData\":[{\"providerId\":\"google.com\",\"rawId\":\"116740594955009033783\",\"federatedId\":\"116740594955009033783\",\"displayName\":\"Jens Christensen\",\"photoUrl\":\"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c\",\"email\":\"paviln97dk@gmail.com\"}]},\"context\":{\"eventId\":\"c4f77dc4-d348-4c6c-847f-5f102b711690\",\"eventType\":\"providers/firebase.auth/eventTypes/user.create\",\"resource\":\"projects/pentia-1e4eb\",\"params\":{},\"timestamp\":\"2022-08-12T13:46:13.573Z\"}}"}}
[debug] [2022-08-12T13:46:17.593Z] [runtime-status] [2992] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] Ephemeral server survived."}}
[info] i  functions: Finished "createUser" in ~1s {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"Finished \"createUser\" in ~1s"}}
[debug] [2022-08-12T13:46:17.594Z] [worker-us-central1-createUser-09b6bf9e-9af5-48bf-a44d-c03699d46f7a]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-createUser-09b6bf9e-9af5-48bf-a44d-c03699d46f7a]: IDLE"}}
[debug] [2022-08-12T13:46:17.594Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-08-12T13:47:06.483Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-08-12T13:47:06.483Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-08-12T13:47:06.483Z] Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0 {"metadata":{"emulator":{"name":"functions"},"message":"Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0"}}
[debug] [2022-08-12T13:47:06.491Z] [worker-pool] addWorker(us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T13:47:06.491Z] [worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1"}}
[debug] [2022-08-12T13:47:06.491Z] [worker-pool] submitWork(triggerId=us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T13:47:06.491Z] [worker-us-central1-sendRoomNotification-fc534925-f2e4-45ba-b842-faa4774c7284]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-fc534925-f2e4-45ba-b842-faa4774c7284]: BUSY"}}
[debug] [2022-08-12T13:47:07.554Z] [runtime-status] [11284] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [11284] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:07.556Z] [runtime-status] [11284] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [11284] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:07.557Z] [runtime-status] [11284] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [11284] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-08-12T13:47:07.557Z] [runtime-status] [11284] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [11284] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:07.601Z] [runtime-status] [11284] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [11284] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-08-12T13:47:07.601Z] [runtime-status] [11284] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [11284] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:47:07.602Z] [runtime-status] [11284] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [11284] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:07.603Z] [runtime-status] [11284] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [11284] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:07.604Z] [runtime-status] [11284] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [11284] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:07.604Z] [runtime-status] [11284] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [11284] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:47:07.604Z] [runtime-status] [11284] Functions runtime initialized. {"cwd":"C:\\Users\\pavil\\source\\repos\\pentia\\functions","node_version":"16.14.2"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [11284] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\",\"node_version\":\"16.14.2\"}"}}
[debug] [2022-08-12T13:47:07.606Z] [runtime-status] [11284] initializeApp(DEFAULT) {"storageBucket":"pentia-1e4eb.appspot.com","projectId":"pentia-1e4eb"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [11284] initializeApp(DEFAULT) {\"storageBucket\":\"pentia-1e4eb.appspot.com\",\"projectId\":\"pentia-1e4eb\"}"}}
[debug] [2022-08-12T13:47:07.607Z] [runtime-status] [11284] Beginning invocation function sendRoomNotification! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [11284] Beginning invocation function sendRoomNotification!"}}
[info] i  functions: Beginning execution of "sendRoomNotification" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Beginning execution of \"sendRoomNotification\""}}
[debug] [2022-08-12T13:47:07.608Z] [runtime-status] [11284] Running sendRoomNotification in signature event {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [11284] Running sendRoomNotification in signature event"}}
[debug] [2022-08-12T13:47:07.608Z] [runtime-status] [11284] ProcessBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/nYNoajsSK1eimjC5Pk9y","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"S"},"createdAt":{"timestampValue":"2022-08-12T13:47:06.432Z"}},"createTime":"2022-08-12T13:47:06.439503Z","updateTime":"2022-08-12T13:47:06.439503Z"},"updateMask":{}},"context":{"eventId":"0c38854b-acde-4990-81d7-2e66fae0f5b6","timestamp":"2022-08-12T13:47:06.439Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/nYNoajsSK1eimjC5Pk9y","service":"firestore.googleapis.com"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [11284] ProcessBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/nYNoajsSK1eimjC5Pk9y\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"S\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T13:47:06.432Z\"}},\"createTime\":\"2022-08-12T13:47:06.439503Z\",\"updateTime\":\"2022-08-12T13:47:06.439503Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"0c38854b-acde-4990-81d7-2e66fae0f5b6\",\"timestamp\":\"2022-08-12T13:47:06.439Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/nYNoajsSK1eimjC5Pk9y\",\"service\":\"firestore.googleapis.com\"}}}"}}
[debug] [2022-08-12T13:47:07.608Z] [runtime-status] [11284] ProcessBackground: lifting resource.name from resource {"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/nYNoajsSK1eimjC5Pk9y","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [11284] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/nYNoajsSK1eimjC5Pk9y\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2022-08-12T13:47:07.608Z] [runtime-status] [11284] RunBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/nYNoajsSK1eimjC5Pk9y","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"S"},"createdAt":{"timestampValue":"2022-08-12T13:47:06.432Z"}},"createTime":"2022-08-12T13:47:06.439503Z","updateTime":"2022-08-12T13:47:06.439503Z"},"updateMask":{}},"context":{"eventId":"0c38854b-acde-4990-81d7-2e66fae0f5b6","timestamp":"2022-08-12T13:47:06.439Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/pentia-1e4eb/databases/(default)/documents/messages/nYNoajsSK1eimjC5Pk9y"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [11284] RunBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/nYNoajsSK1eimjC5Pk9y\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"S\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T13:47:06.432Z\"}},\"createTime\":\"2022-08-12T13:47:06.439503Z\",\"updateTime\":\"2022-08-12T13:47:06.439503Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"0c38854b-acde-4990-81d7-2e66fae0f5b6\",\"timestamp\":\"2022-08-12T13:47:06.439Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/nYNoajsSK1eimjC5Pk9y\"}}"}}
[debug] [2022-08-12T13:47:07.971Z] [runtime-status] [11284] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [11284] Ephemeral server survived."}}
[warn] !  functions: TypeError: subscribers is not iterable
    at C:\Users\pavil\source\repos\pentia\functions\lib\index.js:30:30
    at processTicksAndRejections (node:internal/process/task_queues:96:5)
    at async runFunction (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:565:9)
    at async runBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:577:5)
    at async processBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:560:5)
    at async invokeTrigger (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:641:13)
    at async handleMessage (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:741:9) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"TypeError: subscribers is not iterable\n    at C:\\Users\\pavil\\source\\repos\\pentia\\functions\\lib\\index.js:30:30\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async runFunction (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:565:9)\n    at async runBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:577:5)\n    at async processBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:560:5)\n    at async invokeTrigger (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:641:13)\n    at async handleMessage (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:741:9)"}}
[warn] !  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[debug] [2022-08-12T13:47:07.974Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-08-12T13:47:07.985Z] [worker-us-central1-sendRoomNotification-fc534925-f2e4-45ba-b842-faa4774c7284]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-fc534925-f2e4-45ba-b842-faa4774c7284]: exited"}}
[debug] [2022-08-12T13:47:07.985Z] [worker-us-central1-sendRoomNotification-fc534925-f2e4-45ba-b842-faa4774c7284]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-fc534925-f2e4-45ba-b842-faa4774c7284]: FINISHED"}}
[debug] [2022-08-12T13:47:12.654Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-08-12T13:47:12.654Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-08-12T13:47:12.654Z] Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0 {"metadata":{"emulator":{"name":"functions"},"message":"Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0"}}
[debug] [2022-08-12T13:47:12.654Z] [worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0"}}
[debug] [2022-08-12T13:47:12.663Z] [worker-pool] addWorker(us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T13:47:12.663Z] [worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1"}}
[debug] [2022-08-12T13:47:12.663Z] [worker-pool] submitWork(triggerId=us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T13:47:12.663Z] [worker-us-central1-sendRoomNotification-f4093cea-7198-4a67-944a-a9ff4d65ecf0]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-f4093cea-7198-4a67-944a-a9ff4d65ecf0]: BUSY"}}
[debug] [2022-08-12T13:47:13.698Z] [runtime-status] [6280] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6280] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:13.701Z] [runtime-status] [6280] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6280] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:13.701Z] [runtime-status] [6280] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6280] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-08-12T13:47:13.702Z] [runtime-status] [6280] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6280] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:13.745Z] [runtime-status] [6280] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6280] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-08-12T13:47:13.745Z] [runtime-status] [6280] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6280] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:47:13.746Z] [runtime-status] [6280] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6280] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:13.747Z] [runtime-status] [6280] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6280] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:13.748Z] [runtime-status] [6280] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6280] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:13.748Z] [runtime-status] [6280] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6280] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:47:13.748Z] [runtime-status] [6280] Functions runtime initialized. {"cwd":"C:\\Users\\pavil\\source\\repos\\pentia\\functions","node_version":"16.14.2"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6280] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\",\"node_version\":\"16.14.2\"}"}}
[debug] [2022-08-12T13:47:13.751Z] [runtime-status] [6280] initializeApp(DEFAULT) {"storageBucket":"pentia-1e4eb.appspot.com","projectId":"pentia-1e4eb"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6280] initializeApp(DEFAULT) {\"storageBucket\":\"pentia-1e4eb.appspot.com\",\"projectId\":\"pentia-1e4eb\"}"}}
[debug] [2022-08-12T13:47:13.751Z] [runtime-status] [6280] Beginning invocation function sendRoomNotification! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6280] Beginning invocation function sendRoomNotification!"}}
[info] i  functions: Beginning execution of "sendRoomNotification" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Beginning execution of \"sendRoomNotification\""}}
[debug] [2022-08-12T13:47:13.752Z] [runtime-status] [6280] Running sendRoomNotification in signature event {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6280] Running sendRoomNotification in signature event"}}
[debug] [2022-08-12T13:47:13.752Z] [runtime-status] [6280] ProcessBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/lNqAStQAlmrjlZLpOGbV","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"Sk"},"createdAt":{"timestampValue":"2022-08-12T13:47:12.640Z"}},"createTime":"2022-08-12T13:47:12.644450Z","updateTime":"2022-08-12T13:47:12.644450Z"},"updateMask":{}},"context":{"eventId":"3699c0f4-74ce-46d0-a477-1f2e1a3b67c8","timestamp":"2022-08-12T13:47:12.644Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/lNqAStQAlmrjlZLpOGbV","service":"firestore.googleapis.com"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6280] ProcessBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/lNqAStQAlmrjlZLpOGbV\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"Sk\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T13:47:12.640Z\"}},\"createTime\":\"2022-08-12T13:47:12.644450Z\",\"updateTime\":\"2022-08-12T13:47:12.644450Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"3699c0f4-74ce-46d0-a477-1f2e1a3b67c8\",\"timestamp\":\"2022-08-12T13:47:12.644Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/lNqAStQAlmrjlZLpOGbV\",\"service\":\"firestore.googleapis.com\"}}}"}}
[debug] [2022-08-12T13:47:13.752Z] [runtime-status] [6280] ProcessBackground: lifting resource.name from resource {"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/lNqAStQAlmrjlZLpOGbV","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6280] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/lNqAStQAlmrjlZLpOGbV\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2022-08-12T13:47:13.752Z] [runtime-status] [6280] RunBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/lNqAStQAlmrjlZLpOGbV","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"Sk"},"createdAt":{"timestampValue":"2022-08-12T13:47:12.640Z"}},"createTime":"2022-08-12T13:47:12.644450Z","updateTime":"2022-08-12T13:47:12.644450Z"},"updateMask":{}},"context":{"eventId":"3699c0f4-74ce-46d0-a477-1f2e1a3b67c8","timestamp":"2022-08-12T13:47:12.644Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/pentia-1e4eb/databases/(default)/documents/messages/lNqAStQAlmrjlZLpOGbV"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6280] RunBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/lNqAStQAlmrjlZLpOGbV\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"Sk\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T13:47:12.640Z\"}},\"createTime\":\"2022-08-12T13:47:12.644450Z\",\"updateTime\":\"2022-08-12T13:47:12.644450Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"3699c0f4-74ce-46d0-a477-1f2e1a3b67c8\",\"timestamp\":\"2022-08-12T13:47:12.644Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/lNqAStQAlmrjlZLpOGbV\"}}"}}
[debug] [2022-08-12T13:47:14.085Z] [runtime-status] [6280] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6280] Ephemeral server survived."}}
[warn] !  functions: TypeError: subscribers is not iterable
    at C:\Users\pavil\source\repos\pentia\functions\lib\index.js:30:30
    at processTicksAndRejections (node:internal/process/task_queues:96:5)
    at async runFunction (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:565:9)
    at async runBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:577:5)
    at async processBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:560:5)
    at async invokeTrigger (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:641:13)
    at async handleMessage (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:741:9) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"TypeError: subscribers is not iterable\n    at C:\\Users\\pavil\\source\\repos\\pentia\\functions\\lib\\index.js:30:30\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async runFunction (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:565:9)\n    at async runBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:577:5)\n    at async processBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:560:5)\n    at async invokeTrigger (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:641:13)\n    at async handleMessage (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:741:9)"}}
[warn] !  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[debug] [2022-08-12T13:47:14.088Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-08-12T13:47:14.097Z] [worker-us-central1-sendRoomNotification-f4093cea-7198-4a67-944a-a9ff4d65ecf0]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-f4093cea-7198-4a67-944a-a9ff4d65ecf0]: exited"}}
[debug] [2022-08-12T13:47:14.098Z] [worker-us-central1-sendRoomNotification-f4093cea-7198-4a67-944a-a9ff4d65ecf0]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-f4093cea-7198-4a67-944a-a9ff4d65ecf0]: FINISHED"}}
[debug] [2022-08-12T13:47:17.667Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-08-12T13:47:17.667Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-08-12T13:47:17.667Z] Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0 {"metadata":{"emulator":{"name":"functions"},"message":"Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0"}}
[debug] [2022-08-12T13:47:17.667Z] [worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0"}}
[debug] [2022-08-12T13:47:17.677Z] [worker-pool] addWorker(us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T13:47:17.677Z] [worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1"}}
[debug] [2022-08-12T13:47:17.677Z] [worker-pool] submitWork(triggerId=us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T13:47:17.677Z] [worker-us-central1-sendRoomNotification-a76982a0-bcf5-45c3-84c5-e9b4c2309395]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-a76982a0-bcf5-45c3-84c5-e9b4c2309395]: BUSY"}}
[debug] [2022-08-12T13:47:18.720Z] [runtime-status] [3324] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3324] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:18.722Z] [runtime-status] [3324] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3324] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:18.722Z] [runtime-status] [3324] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3324] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-08-12T13:47:18.723Z] [runtime-status] [3324] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3324] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:18.769Z] [runtime-status] [3324] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3324] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-08-12T13:47:18.769Z] [runtime-status] [3324] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3324] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:47:18.770Z] [runtime-status] [3324] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3324] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:18.771Z] [runtime-status] [3324] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3324] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:18.772Z] [runtime-status] [3324] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3324] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:18.772Z] [runtime-status] [3324] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3324] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:47:18.772Z] [runtime-status] [3324] Functions runtime initialized. {"cwd":"C:\\Users\\pavil\\source\\repos\\pentia\\functions","node_version":"16.14.2"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3324] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\",\"node_version\":\"16.14.2\"}"}}
[debug] [2022-08-12T13:47:18.775Z] [runtime-status] [3324] initializeApp(DEFAULT) {"storageBucket":"pentia-1e4eb.appspot.com","projectId":"pentia-1e4eb"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3324] initializeApp(DEFAULT) {\"storageBucket\":\"pentia-1e4eb.appspot.com\",\"projectId\":\"pentia-1e4eb\"}"}}
[debug] [2022-08-12T13:47:18.776Z] [runtime-status] [3324] Beginning invocation function sendRoomNotification! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3324] Beginning invocation function sendRoomNotification!"}}
[info] i  functions: Beginning execution of "sendRoomNotification" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Beginning execution of \"sendRoomNotification\""}}
[debug] [2022-08-12T13:47:18.777Z] [runtime-status] [3324] Running sendRoomNotification in signature event {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3324] Running sendRoomNotification in signature event"}}
[debug] [2022-08-12T13:47:18.778Z] [runtime-status] [3324] ProcessBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/vphp2jxYiL7JN29VLsbf","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"Sk"},"createdAt":{"timestampValue":"2022-08-12T13:47:17.654Z"}},"createTime":"2022-08-12T13:47:17.658480Z","updateTime":"2022-08-12T13:47:17.658480Z"},"updateMask":{}},"context":{"eventId":"e47f6a05-1503-414d-a4d2-e702ed7e36df","timestamp":"2022-08-12T13:47:17.658Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/vphp2jxYiL7JN29VLsbf","service":"firestore.googleapis.com"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3324] ProcessBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/vphp2jxYiL7JN29VLsbf\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"Sk\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T13:47:17.654Z\"}},\"createTime\":\"2022-08-12T13:47:17.658480Z\",\"updateTime\":\"2022-08-12T13:47:17.658480Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"e47f6a05-1503-414d-a4d2-e702ed7e36df\",\"timestamp\":\"2022-08-12T13:47:17.658Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/vphp2jxYiL7JN29VLsbf\",\"service\":\"firestore.googleapis.com\"}}}"}}
[debug] [2022-08-12T13:47:18.778Z] [runtime-status] [3324] ProcessBackground: lifting resource.name from resource {"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/vphp2jxYiL7JN29VLsbf","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3324] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/vphp2jxYiL7JN29VLsbf\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2022-08-12T13:47:18.778Z] [runtime-status] [3324] RunBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/vphp2jxYiL7JN29VLsbf","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"Sk"},"createdAt":{"timestampValue":"2022-08-12T13:47:17.654Z"}},"createTime":"2022-08-12T13:47:17.658480Z","updateTime":"2022-08-12T13:47:17.658480Z"},"updateMask":{}},"context":{"eventId":"e47f6a05-1503-414d-a4d2-e702ed7e36df","timestamp":"2022-08-12T13:47:17.658Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/pentia-1e4eb/databases/(default)/documents/messages/vphp2jxYiL7JN29VLsbf"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3324] RunBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/vphp2jxYiL7JN29VLsbf\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"Sk\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T13:47:17.654Z\"}},\"createTime\":\"2022-08-12T13:47:17.658480Z\",\"updateTime\":\"2022-08-12T13:47:17.658480Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"e47f6a05-1503-414d-a4d2-e702ed7e36df\",\"timestamp\":\"2022-08-12T13:47:17.658Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/vphp2jxYiL7JN29VLsbf\"}}"}}
[debug] [2022-08-12T13:47:19.116Z] [runtime-status] [3324] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3324] Ephemeral server survived."}}
[warn] !  functions: TypeError: subscribers is not iterable
    at C:\Users\pavil\source\repos\pentia\functions\lib\index.js:30:30
    at processTicksAndRejections (node:internal/process/task_queues:96:5)
    at async runFunction (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:565:9)
    at async runBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:577:5)
    at async processBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:560:5)
    at async invokeTrigger (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:641:13)
    at async handleMessage (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:741:9) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"TypeError: subscribers is not iterable\n    at C:\\Users\\pavil\\source\\repos\\pentia\\functions\\lib\\index.js:30:30\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async runFunction (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:565:9)\n    at async runBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:577:5)\n    at async processBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:560:5)\n    at async invokeTrigger (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:641:13)\n    at async handleMessage (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:741:9)"}}
[warn] !  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[debug] [2022-08-12T13:47:19.118Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-08-12T13:47:19.128Z] [worker-us-central1-sendRoomNotification-a76982a0-bcf5-45c3-84c5-e9b4c2309395]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-a76982a0-bcf5-45c3-84c5-e9b4c2309395]: exited"}}
[debug] [2022-08-12T13:47:19.129Z] [worker-us-central1-sendRoomNotification-a76982a0-bcf5-45c3-84c5-e9b4c2309395]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-a76982a0-bcf5-45c3-84c5-e9b4c2309395]: FINISHED"}}
[debug] [2022-08-12T13:47:25.232Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-08-12T13:47:25.232Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-08-12T13:47:25.232Z] Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0 {"metadata":{"emulator":{"name":"functions"},"message":"Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0"}}
[debug] [2022-08-12T13:47:25.233Z] [worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0"}}
[debug] [2022-08-12T13:47:25.240Z] [worker-pool] addWorker(us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T13:47:25.240Z] [worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1"}}
[debug] [2022-08-12T13:47:25.240Z] [worker-pool] submitWork(triggerId=us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T13:47:25.240Z] [worker-us-central1-sendRoomNotification-da2f5e7d-9741-47a5-9085-0254215c68ba]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-da2f5e7d-9741-47a5-9085-0254215c68ba]: BUSY"}}
[debug] [2022-08-12T13:47:26.315Z] [runtime-status] [15212] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15212] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:26.317Z] [runtime-status] [15212] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15212] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:26.318Z] [runtime-status] [15212] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15212] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-08-12T13:47:26.318Z] [runtime-status] [15212] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15212] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:26.362Z] [runtime-status] [15212] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15212] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-08-12T13:47:26.363Z] [runtime-status] [15212] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15212] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:47:26.363Z] [runtime-status] [15212] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15212] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:26.365Z] [runtime-status] [15212] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15212] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:26.366Z] [runtime-status] [15212] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15212] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:26.366Z] [runtime-status] [15212] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15212] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:47:26.366Z] [runtime-status] [15212] Functions runtime initialized. {"cwd":"C:\\Users\\pavil\\source\\repos\\pentia\\functions","node_version":"16.14.2"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15212] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\",\"node_version\":\"16.14.2\"}"}}
[debug] [2022-08-12T13:47:26.369Z] [runtime-status] [15212] initializeApp(DEFAULT) {"storageBucket":"pentia-1e4eb.appspot.com","projectId":"pentia-1e4eb"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15212] initializeApp(DEFAULT) {\"storageBucket\":\"pentia-1e4eb.appspot.com\",\"projectId\":\"pentia-1e4eb\"}"}}
[debug] [2022-08-12T13:47:26.369Z] [runtime-status] [15212] Beginning invocation function sendRoomNotification! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15212] Beginning invocation function sendRoomNotification!"}}
[info] i  functions: Beginning execution of "sendRoomNotification" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Beginning execution of \"sendRoomNotification\""}}
[debug] [2022-08-12T13:47:26.370Z] [runtime-status] [15212] Running sendRoomNotification in signature event {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15212] Running sendRoomNotification in signature event"}}
[debug] [2022-08-12T13:47:26.370Z] [runtime-status] [15212] ProcessBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/bgruHrv07uc2YI1XxmVB","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"B"},"createdAt":{"timestampValue":"2022-08-12T13:47:25.219Z"}},"createTime":"2022-08-12T13:47:25.224589Z","updateTime":"2022-08-12T13:47:25.224589Z"},"updateMask":{}},"context":{"eventId":"6f021575-3207-4730-aa53-4cfe68f281c1","timestamp":"2022-08-12T13:47:25.224Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/bgruHrv07uc2YI1XxmVB","service":"firestore.googleapis.com"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15212] ProcessBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/bgruHrv07uc2YI1XxmVB\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"B\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T13:47:25.219Z\"}},\"createTime\":\"2022-08-12T13:47:25.224589Z\",\"updateTime\":\"2022-08-12T13:47:25.224589Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"6f021575-3207-4730-aa53-4cfe68f281c1\",\"timestamp\":\"2022-08-12T13:47:25.224Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/bgruHrv07uc2YI1XxmVB\",\"service\":\"firestore.googleapis.com\"}}}"}}
[debug] [2022-08-12T13:47:26.371Z] [runtime-status] [15212] ProcessBackground: lifting resource.name from resource {"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/bgruHrv07uc2YI1XxmVB","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15212] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/bgruHrv07uc2YI1XxmVB\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2022-08-12T13:47:26.371Z] [runtime-status] [15212] RunBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/bgruHrv07uc2YI1XxmVB","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"B"},"createdAt":{"timestampValue":"2022-08-12T13:47:25.219Z"}},"createTime":"2022-08-12T13:47:25.224589Z","updateTime":"2022-08-12T13:47:25.224589Z"},"updateMask":{}},"context":{"eventId":"6f021575-3207-4730-aa53-4cfe68f281c1","timestamp":"2022-08-12T13:47:25.224Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/pentia-1e4eb/databases/(default)/documents/messages/bgruHrv07uc2YI1XxmVB"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15212] RunBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/bgruHrv07uc2YI1XxmVB\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"B\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T13:47:25.219Z\"}},\"createTime\":\"2022-08-12T13:47:25.224589Z\",\"updateTime\":\"2022-08-12T13:47:25.224589Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"6f021575-3207-4730-aa53-4cfe68f281c1\",\"timestamp\":\"2022-08-12T13:47:25.224Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/bgruHrv07uc2YI1XxmVB\"}}"}}
[debug] [2022-08-12T13:47:26.705Z] [runtime-status] [15212] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15212] Ephemeral server survived."}}
[warn] !  functions: TypeError: subscribers is not iterable
    at C:\Users\pavil\source\repos\pentia\functions\lib\index.js:30:30
    at processTicksAndRejections (node:internal/process/task_queues:96:5)
    at async runFunction (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:565:9)
    at async runBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:577:5)
    at async processBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:560:5)
    at async invokeTrigger (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:641:13)
    at async handleMessage (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:741:9) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"TypeError: subscribers is not iterable\n    at C:\\Users\\pavil\\source\\repos\\pentia\\functions\\lib\\index.js:30:30\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async runFunction (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:565:9)\n    at async runBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:577:5)\n    at async processBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:560:5)\n    at async invokeTrigger (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:641:13)\n    at async handleMessage (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:741:9)"}}
[warn] !  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[debug] [2022-08-12T13:47:26.707Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-08-12T13:47:26.718Z] [worker-us-central1-sendRoomNotification-da2f5e7d-9741-47a5-9085-0254215c68ba]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-da2f5e7d-9741-47a5-9085-0254215c68ba]: exited"}}
[debug] [2022-08-12T13:47:26.718Z] [worker-us-central1-sendRoomNotification-da2f5e7d-9741-47a5-9085-0254215c68ba]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-da2f5e7d-9741-47a5-9085-0254215c68ba]: FINISHED"}}
[debug] [2022-08-12T13:47:36.880Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-08-12T13:47:36.880Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-08-12T13:47:36.880Z] Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0 {"metadata":{"emulator":{"name":"functions"},"message":"Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0"}}
[debug] [2022-08-12T13:47:36.880Z] [worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0"}}
[debug] [2022-08-12T13:47:36.887Z] [worker-pool] addWorker(us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T13:47:36.887Z] [worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1"}}
[debug] [2022-08-12T13:47:36.887Z] [worker-pool] submitWork(triggerId=us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T13:47:36.887Z] [worker-us-central1-sendRoomNotification-eff8f2a1-f5eb-4587-8690-598110d291c6]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-eff8f2a1-f5eb-4587-8690-598110d291c6]: BUSY"}}
[debug] [2022-08-12T13:47:37.962Z] [runtime-status] [14792] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [14792] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:37.964Z] [runtime-status] [14792] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [14792] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:37.964Z] [runtime-status] [14792] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [14792] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-08-12T13:47:37.965Z] [runtime-status] [14792] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [14792] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:38.009Z] [runtime-status] [14792] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [14792] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-08-12T13:47:38.010Z] [runtime-status] [14792] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [14792] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:47:38.012Z] [runtime-status] [14792] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [14792] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:38.012Z] [runtime-status] [14792] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [14792] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:38.013Z] [runtime-status] [14792] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [14792] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:47:38.013Z] [runtime-status] [14792] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [14792] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:47:38.013Z] [runtime-status] [14792] Functions runtime initialized. {"cwd":"C:\\Users\\pavil\\source\\repos\\pentia\\functions","node_version":"16.14.2"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [14792] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\",\"node_version\":\"16.14.2\"}"}}
[debug] [2022-08-12T13:47:38.016Z] [runtime-status] [14792] initializeApp(DEFAULT) {"storageBucket":"pentia-1e4eb.appspot.com","projectId":"pentia-1e4eb"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [14792] initializeApp(DEFAULT) {\"storageBucket\":\"pentia-1e4eb.appspot.com\",\"projectId\":\"pentia-1e4eb\"}"}}
[debug] [2022-08-12T13:47:38.016Z] [runtime-status] [14792] Beginning invocation function sendRoomNotification! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [14792] Beginning invocation function sendRoomNotification!"}}
[info] i  functions: Beginning execution of "sendRoomNotification" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Beginning execution of \"sendRoomNotification\""}}
[debug] [2022-08-12T13:47:38.017Z] [runtime-status] [14792] Running sendRoomNotification in signature event {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [14792] Running sendRoomNotification in signature event"}}
[debug] [2022-08-12T13:47:38.018Z] [runtime-status] [14792] ProcessBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/K6yMTLwQgG3yLexLvghg","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"N"},"createdAt":{"timestampValue":"2022-08-12T13:47:36.867Z"}},"createTime":"2022-08-12T13:47:36.872540Z","updateTime":"2022-08-12T13:47:36.872540Z"},"updateMask":{}},"context":{"eventId":"e230a085-15e9-404b-bc3b-2db26e198622","timestamp":"2022-08-12T13:47:36.872Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/K6yMTLwQgG3yLexLvghg","service":"firestore.googleapis.com"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [14792] ProcessBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/K6yMTLwQgG3yLexLvghg\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"N\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T13:47:36.867Z\"}},\"createTime\":\"2022-08-12T13:47:36.872540Z\",\"updateTime\":\"2022-08-12T13:47:36.872540Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"e230a085-15e9-404b-bc3b-2db26e198622\",\"timestamp\":\"2022-08-12T13:47:36.872Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/K6yMTLwQgG3yLexLvghg\",\"service\":\"firestore.googleapis.com\"}}}"}}
[debug] [2022-08-12T13:47:38.018Z] [runtime-status] [14792] ProcessBackground: lifting resource.name from resource {"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/K6yMTLwQgG3yLexLvghg","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [14792] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/K6yMTLwQgG3yLexLvghg\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2022-08-12T13:47:38.018Z] [runtime-status] [14792] RunBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/K6yMTLwQgG3yLexLvghg","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"N"},"createdAt":{"timestampValue":"2022-08-12T13:47:36.867Z"}},"createTime":"2022-08-12T13:47:36.872540Z","updateTime":"2022-08-12T13:47:36.872540Z"},"updateMask":{}},"context":{"eventId":"e230a085-15e9-404b-bc3b-2db26e198622","timestamp":"2022-08-12T13:47:36.872Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/pentia-1e4eb/databases/(default)/documents/messages/K6yMTLwQgG3yLexLvghg"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [14792] RunBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/K6yMTLwQgG3yLexLvghg\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"N\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T13:47:36.867Z\"}},\"createTime\":\"2022-08-12T13:47:36.872540Z\",\"updateTime\":\"2022-08-12T13:47:36.872540Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"e230a085-15e9-404b-bc3b-2db26e198622\",\"timestamp\":\"2022-08-12T13:47:36.872Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/K6yMTLwQgG3yLexLvghg\"}}"}}
[debug] [2022-08-12T13:47:38.391Z] [runtime-status] [14792] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [14792] Ephemeral server survived."}}
[warn] !  functions: TypeError: subscribers is not iterable
    at C:\Users\pavil\source\repos\pentia\functions\lib\index.js:30:30
    at processTicksAndRejections (node:internal/process/task_queues:96:5)
    at async runFunction (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:565:9)
    at async runBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:577:5)
    at async processBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:560:5)
    at async invokeTrigger (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:641:13)
    at async handleMessage (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:741:9) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"TypeError: subscribers is not iterable\n    at C:\\Users\\pavil\\source\\repos\\pentia\\functions\\lib\\index.js:30:30\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async runFunction (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:565:9)\n    at async runBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:577:5)\n    at async processBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:560:5)\n    at async invokeTrigger (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:641:13)\n    at async handleMessage (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:741:9)"}}
[warn] !  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[debug] [2022-08-12T13:47:38.395Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-08-12T13:47:38.407Z] [worker-us-central1-sendRoomNotification-eff8f2a1-f5eb-4587-8690-598110d291c6]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-eff8f2a1-f5eb-4587-8690-598110d291c6]: exited"}}
[debug] [2022-08-12T13:47:38.407Z] [worker-us-central1-sendRoomNotification-eff8f2a1-f5eb-4587-8690-598110d291c6]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-eff8f2a1-f5eb-4587-8690-598110d291c6]: FINISHED"}}
[debug] [2022-08-12T13:49:59.456Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-08-12T13:49:59.456Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-08-12T13:49:59.456Z] Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0 {"metadata":{"emulator":{"name":"functions"},"message":"Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0"}}
[debug] [2022-08-12T13:49:59.456Z] [worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0"}}
[debug] [2022-08-12T13:49:59.464Z] [worker-pool] addWorker(us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T13:49:59.464Z] [worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1"}}
[debug] [2022-08-12T13:49:59.464Z] [worker-pool] submitWork(triggerId=us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T13:49:59.464Z] [worker-us-central1-sendRoomNotification-69d80955-3d48-4bc0-9d89-a1bb500b0473]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-69d80955-3d48-4bc0-9d89-a1bb500b0473]: BUSY"}}
[debug] [2022-08-12T13:50:00.613Z] [runtime-status] [17300] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17300] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:50:00.615Z] [runtime-status] [17300] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17300] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:50:00.615Z] [runtime-status] [17300] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17300] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-08-12T13:50:00.616Z] [runtime-status] [17300] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17300] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:50:00.659Z] [runtime-status] [17300] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17300] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-08-12T13:50:00.659Z] [runtime-status] [17300] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17300] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:50:00.660Z] [runtime-status] [17300] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17300] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:50:00.661Z] [runtime-status] [17300] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17300] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:50:00.661Z] [runtime-status] [17300] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17300] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:50:00.662Z] [runtime-status] [17300] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17300] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:50:00.662Z] [runtime-status] [17300] Functions runtime initialized. {"cwd":"C:\\Users\\pavil\\source\\repos\\pentia\\functions","node_version":"16.14.2"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17300] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\",\"node_version\":\"16.14.2\"}"}}
[debug] [2022-08-12T13:50:00.664Z] [runtime-status] [17300] initializeApp(DEFAULT) {"storageBucket":"pentia-1e4eb.appspot.com","projectId":"pentia-1e4eb"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17300] initializeApp(DEFAULT) {\"storageBucket\":\"pentia-1e4eb.appspot.com\",\"projectId\":\"pentia-1e4eb\"}"}}
[debug] [2022-08-12T13:50:00.665Z] [runtime-status] [17300] Beginning invocation function sendRoomNotification! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17300] Beginning invocation function sendRoomNotification!"}}
[info] i  functions: Beginning execution of "sendRoomNotification" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Beginning execution of \"sendRoomNotification\""}}
[debug] [2022-08-12T13:50:00.666Z] [runtime-status] [17300] Running sendRoomNotification in signature event {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17300] Running sendRoomNotification in signature event"}}
[debug] [2022-08-12T13:50:00.666Z] [runtime-status] [17300] ProcessBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/8FUPHGAu2zr31VgFXpwM","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"N"},"createdAt":{"timestampValue":"2022-08-12T13:49:59.443Z"}},"createTime":"2022-08-12T13:49:59.447357Z","updateTime":"2022-08-12T13:49:59.447357Z"},"updateMask":{}},"context":{"eventId":"05b1230e-3767-463b-8585-4d6fb5f538c6","timestamp":"2022-08-12T13:49:59.447Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/8FUPHGAu2zr31VgFXpwM","service":"firestore.googleapis.com"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17300] ProcessBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/8FUPHGAu2zr31VgFXpwM\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"N\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T13:49:59.443Z\"}},\"createTime\":\"2022-08-12T13:49:59.447357Z\",\"updateTime\":\"2022-08-12T13:49:59.447357Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"05b1230e-3767-463b-8585-4d6fb5f538c6\",\"timestamp\":\"2022-08-12T13:49:59.447Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/8FUPHGAu2zr31VgFXpwM\",\"service\":\"firestore.googleapis.com\"}}}"}}
[debug] [2022-08-12T13:50:00.666Z] [runtime-status] [17300] ProcessBackground: lifting resource.name from resource {"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/8FUPHGAu2zr31VgFXpwM","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17300] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/8FUPHGAu2zr31VgFXpwM\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2022-08-12T13:50:00.666Z] [runtime-status] [17300] RunBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/8FUPHGAu2zr31VgFXpwM","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"N"},"createdAt":{"timestampValue":"2022-08-12T13:49:59.443Z"}},"createTime":"2022-08-12T13:49:59.447357Z","updateTime":"2022-08-12T13:49:59.447357Z"},"updateMask":{}},"context":{"eventId":"05b1230e-3767-463b-8585-4d6fb5f538c6","timestamp":"2022-08-12T13:49:59.447Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/pentia-1e4eb/databases/(default)/documents/messages/8FUPHGAu2zr31VgFXpwM"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17300] RunBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/8FUPHGAu2zr31VgFXpwM\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"N\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T13:49:59.443Z\"}},\"createTime\":\"2022-08-12T13:49:59.447357Z\",\"updateTime\":\"2022-08-12T13:49:59.447357Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"05b1230e-3767-463b-8585-4d6fb5f538c6\",\"timestamp\":\"2022-08-12T13:49:59.447Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/8FUPHGAu2zr31VgFXpwM\"}}"}}
[debug] [2022-08-12T13:50:01.049Z] [runtime-status] [17300] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17300] Ephemeral server survived."}}
[warn] !  functions: TypeError: subscribers is not iterable
    at C:\Users\pavil\source\repos\pentia\functions\lib\index.js:30:30
    at processTicksAndRejections (node:internal/process/task_queues:96:5)
    at async runFunction (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:565:9)
    at async runBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:577:5)
    at async processBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:560:5)
    at async invokeTrigger (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:641:13)
    at async handleMessage (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:741:9) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"TypeError: subscribers is not iterable\n    at C:\\Users\\pavil\\source\\repos\\pentia\\functions\\lib\\index.js:30:30\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async runFunction (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:565:9)\n    at async runBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:577:5)\n    at async processBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:560:5)\n    at async invokeTrigger (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:641:13)\n    at async handleMessage (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:741:9)"}}
[warn] !  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[debug] [2022-08-12T13:50:01.051Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-08-12T13:50:01.063Z] [worker-us-central1-sendRoomNotification-69d80955-3d48-4bc0-9d89-a1bb500b0473]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-69d80955-3d48-4bc0-9d89-a1bb500b0473]: exited"}}
[debug] [2022-08-12T13:50:01.063Z] [worker-us-central1-sendRoomNotification-69d80955-3d48-4bc0-9d89-a1bb500b0473]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-69d80955-3d48-4bc0-9d89-a1bb500b0473]: FINISHED"}}
[debug] [2022-08-12T13:51:21.081Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-08-12T13:51:21.081Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-08-12T13:51:21.081Z] Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0 {"metadata":{"emulator":{"name":"functions"},"message":"Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0"}}
[debug] [2022-08-12T13:51:21.081Z] [worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0"}}
[debug] [2022-08-12T13:51:21.088Z] [worker-pool] addWorker(us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T13:51:21.088Z] [worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1"}}
[debug] [2022-08-12T13:51:21.088Z] [worker-pool] submitWork(triggerId=us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T13:51:21.089Z] [worker-us-central1-sendRoomNotification-e705a48f-33dc-4ffc-a36c-6cca64625bf6]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-e705a48f-33dc-4ffc-a36c-6cca64625bf6]: BUSY"}}
[debug] [2022-08-12T13:51:22.137Z] [runtime-status] [4352] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [4352] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:51:22.139Z] [runtime-status] [4352] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [4352] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:51:22.140Z] [runtime-status] [4352] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [4352] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-08-12T13:51:22.140Z] [runtime-status] [4352] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [4352] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:51:22.186Z] [runtime-status] [4352] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [4352] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-08-12T13:51:22.187Z] [runtime-status] [4352] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [4352] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:51:22.187Z] [runtime-status] [4352] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [4352] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:51:22.188Z] [runtime-status] [4352] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [4352] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:51:22.189Z] [runtime-status] [4352] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [4352] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:51:22.189Z] [runtime-status] [4352] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [4352] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:51:22.189Z] [runtime-status] [4352] Functions runtime initialized. {"cwd":"C:\\Users\\pavil\\source\\repos\\pentia\\functions","node_version":"16.14.2"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [4352] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\",\"node_version\":\"16.14.2\"}"}}
[debug] [2022-08-12T13:51:22.192Z] [runtime-status] [4352] initializeApp(DEFAULT) {"storageBucket":"pentia-1e4eb.appspot.com","projectId":"pentia-1e4eb"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [4352] initializeApp(DEFAULT) {\"storageBucket\":\"pentia-1e4eb.appspot.com\",\"projectId\":\"pentia-1e4eb\"}"}}
[debug] [2022-08-12T13:51:22.192Z] [runtime-status] [4352] Beginning invocation function sendRoomNotification! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [4352] Beginning invocation function sendRoomNotification!"}}
[info] i  functions: Beginning execution of "sendRoomNotification" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Beginning execution of \"sendRoomNotification\""}}
[debug] [2022-08-12T13:51:22.193Z] [runtime-status] [4352] Running sendRoomNotification in signature event {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [4352] Running sendRoomNotification in signature event"}}
[debug] [2022-08-12T13:51:22.193Z] [runtime-status] [4352] ProcessBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/ZXrJjGcdHYT8bIHFmqyH","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"I"},"createdAt":{"timestampValue":"2022-08-12T13:51:21.072Z"}},"createTime":"2022-08-12T13:51:21.075146Z","updateTime":"2022-08-12T13:51:21.075146Z"},"updateMask":{}},"context":{"eventId":"79dd6e6b-780b-4f76-97d0-f1080668cfaf","timestamp":"2022-08-12T13:51:21.075Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/ZXrJjGcdHYT8bIHFmqyH","service":"firestore.googleapis.com"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [4352] ProcessBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/ZXrJjGcdHYT8bIHFmqyH\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"I\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T13:51:21.072Z\"}},\"createTime\":\"2022-08-12T13:51:21.075146Z\",\"updateTime\":\"2022-08-12T13:51:21.075146Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"79dd6e6b-780b-4f76-97d0-f1080668cfaf\",\"timestamp\":\"2022-08-12T13:51:21.075Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/ZXrJjGcdHYT8bIHFmqyH\",\"service\":\"firestore.googleapis.com\"}}}"}}
[debug] [2022-08-12T13:51:22.193Z] [runtime-status] [4352] ProcessBackground: lifting resource.name from resource {"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/ZXrJjGcdHYT8bIHFmqyH","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [4352] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/ZXrJjGcdHYT8bIHFmqyH\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2022-08-12T13:51:22.193Z] [runtime-status] [4352] RunBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/ZXrJjGcdHYT8bIHFmqyH","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"I"},"createdAt":{"timestampValue":"2022-08-12T13:51:21.072Z"}},"createTime":"2022-08-12T13:51:21.075146Z","updateTime":"2022-08-12T13:51:21.075146Z"},"updateMask":{}},"context":{"eventId":"79dd6e6b-780b-4f76-97d0-f1080668cfaf","timestamp":"2022-08-12T13:51:21.075Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/pentia-1e4eb/databases/(default)/documents/messages/ZXrJjGcdHYT8bIHFmqyH"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [4352] RunBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/ZXrJjGcdHYT8bIHFmqyH\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"I\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T13:51:21.072Z\"}},\"createTime\":\"2022-08-12T13:51:21.075146Z\",\"updateTime\":\"2022-08-12T13:51:21.075146Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"79dd6e6b-780b-4f76-97d0-f1080668cfaf\",\"timestamp\":\"2022-08-12T13:51:21.075Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/ZXrJjGcdHYT8bIHFmqyH\"}}"}}
[debug] [2022-08-12T13:51:22.544Z] [runtime-status] [4352] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [4352] Ephemeral server survived."}}
[warn] !  functions: TypeError: subscribers is not iterable
    at C:\Users\pavil\source\repos\pentia\functions\lib\index.js:30:30
    at processTicksAndRejections (node:internal/process/task_queues:96:5)
    at async runFunction (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:565:9)
    at async runBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:577:5)
    at async processBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:560:5)
    at async invokeTrigger (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:641:13)
    at async handleMessage (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:741:9) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"TypeError: subscribers is not iterable\n    at C:\\Users\\pavil\\source\\repos\\pentia\\functions\\lib\\index.js:30:30\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async runFunction (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:565:9)\n    at async runBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:577:5)\n    at async processBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:560:5)\n    at async invokeTrigger (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:641:13)\n    at async handleMessage (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:741:9)"}}
[warn] !  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[debug] [2022-08-12T13:51:22.547Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-08-12T13:51:22.557Z] [worker-us-central1-sendRoomNotification-e705a48f-33dc-4ffc-a36c-6cca64625bf6]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-e705a48f-33dc-4ffc-a36c-6cca64625bf6]: exited"}}
[debug] [2022-08-12T13:51:22.557Z] [worker-us-central1-sendRoomNotification-e705a48f-33dc-4ffc-a36c-6cca64625bf6]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-e705a48f-33dc-4ffc-a36c-6cca64625bf6]: FINISHED"}}
[debug] [2022-08-12T13:53:13.194Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-08-12T13:53:13.194Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-08-12T13:53:13.194Z] Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0 {"metadata":{"emulator":{"name":"functions"},"message":"Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0"}}
[debug] [2022-08-12T13:53:13.194Z] [worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0"}}
[debug] [2022-08-12T13:53:13.203Z] [worker-pool] addWorker(us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T13:53:13.204Z] [worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1"}}
[debug] [2022-08-12T13:53:13.204Z] [worker-pool] submitWork(triggerId=us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T13:53:13.204Z] [worker-us-central1-sendRoomNotification-b534ac60-8a8d-4184-a4ce-aba2c3c9bd5a]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-b534ac60-8a8d-4184-a4ce-aba2c3c9bd5a]: BUSY"}}
[debug] [2022-08-12T13:53:14.461Z] [runtime-status] [8372] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [8372] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:53:14.464Z] [runtime-status] [8372] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [8372] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:53:14.464Z] [runtime-status] [8372] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [8372] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-08-12T13:53:14.465Z] [runtime-status] [8372] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [8372] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:53:14.515Z] [runtime-status] [8372] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [8372] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-08-12T13:53:14.515Z] [runtime-status] [8372] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [8372] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:53:14.516Z] [runtime-status] [8372] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [8372] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:53:14.518Z] [runtime-status] [8372] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [8372] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:53:14.518Z] [runtime-status] [8372] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [8372] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:53:14.519Z] [runtime-status] [8372] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [8372] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:53:14.519Z] [runtime-status] [8372] Functions runtime initialized. {"cwd":"C:\\Users\\pavil\\source\\repos\\pentia\\functions","node_version":"16.14.2"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [8372] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\",\"node_version\":\"16.14.2\"}"}}
[debug] [2022-08-12T13:53:14.522Z] [runtime-status] [8372] initializeApp(DEFAULT) {"storageBucket":"pentia-1e4eb.appspot.com","projectId":"pentia-1e4eb"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [8372] initializeApp(DEFAULT) {\"storageBucket\":\"pentia-1e4eb.appspot.com\",\"projectId\":\"pentia-1e4eb\"}"}}
[debug] [2022-08-12T13:53:14.522Z] [runtime-status] [8372] Beginning invocation function sendRoomNotification! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [8372] Beginning invocation function sendRoomNotification!"}}
[info] i  functions: Beginning execution of "sendRoomNotification" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Beginning execution of \"sendRoomNotification\""}}
[debug] [2022-08-12T13:53:14.523Z] [runtime-status] [8372] Running sendRoomNotification in signature event {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [8372] Running sendRoomNotification in signature event"}}
[debug] [2022-08-12T13:53:14.523Z] [runtime-status] [8372] ProcessBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/GAWnIvotpTiJcMMtQphD","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"P"},"createdAt":{"timestampValue":"2022-08-12T13:53:13.183Z"}},"createTime":"2022-08-12T13:53:13.187168Z","updateTime":"2022-08-12T13:53:13.187168Z"},"updateMask":{}},"context":{"eventId":"40a65103-e09b-4b3d-8646-b016d4630da6","timestamp":"2022-08-12T13:53:13.187Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/GAWnIvotpTiJcMMtQphD","service":"firestore.googleapis.com"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [8372] ProcessBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/GAWnIvotpTiJcMMtQphD\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"P\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T13:53:13.183Z\"}},\"createTime\":\"2022-08-12T13:53:13.187168Z\",\"updateTime\":\"2022-08-12T13:53:13.187168Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"40a65103-e09b-4b3d-8646-b016d4630da6\",\"timestamp\":\"2022-08-12T13:53:13.187Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/GAWnIvotpTiJcMMtQphD\",\"service\":\"firestore.googleapis.com\"}}}"}}
[debug] [2022-08-12T13:53:14.524Z] [runtime-status] [8372] ProcessBackground: lifting resource.name from resource {"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/GAWnIvotpTiJcMMtQphD","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [8372] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/GAWnIvotpTiJcMMtQphD\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2022-08-12T13:53:14.524Z] [runtime-status] [8372] RunBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/GAWnIvotpTiJcMMtQphD","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"P"},"createdAt":{"timestampValue":"2022-08-12T13:53:13.183Z"}},"createTime":"2022-08-12T13:53:13.187168Z","updateTime":"2022-08-12T13:53:13.187168Z"},"updateMask":{}},"context":{"eventId":"40a65103-e09b-4b3d-8646-b016d4630da6","timestamp":"2022-08-12T13:53:13.187Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/pentia-1e4eb/databases/(default)/documents/messages/GAWnIvotpTiJcMMtQphD"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [8372] RunBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/GAWnIvotpTiJcMMtQphD\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"P\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T13:53:13.183Z\"}},\"createTime\":\"2022-08-12T13:53:13.187168Z\",\"updateTime\":\"2022-08-12T13:53:13.187168Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"40a65103-e09b-4b3d-8646-b016d4630da6\",\"timestamp\":\"2022-08-12T13:53:13.187Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/GAWnIvotpTiJcMMtQphD\"}}"}}
[debug] [2022-08-12T13:53:14.908Z] [runtime-status] [8372] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [8372] Ephemeral server survived."}}
[warn] !  functions: TypeError: subscribers is not iterable
    at C:\Users\pavil\source\repos\pentia\functions\lib\index.js:30:30
    at processTicksAndRejections (node:internal/process/task_queues:96:5)
    at async runFunction (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:565:9)
    at async runBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:577:5)
    at async processBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:560:5)
    at async invokeTrigger (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:641:13)
    at async handleMessage (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:741:9) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"TypeError: subscribers is not iterable\n    at C:\\Users\\pavil\\source\\repos\\pentia\\functions\\lib\\index.js:30:30\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async runFunction (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:565:9)\n    at async runBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:577:5)\n    at async processBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:560:5)\n    at async invokeTrigger (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:641:13)\n    at async handleMessage (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:741:9)"}}
[warn] !  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[debug] [2022-08-12T13:53:14.914Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-08-12T13:53:14.927Z] [worker-us-central1-sendRoomNotification-b534ac60-8a8d-4184-a4ce-aba2c3c9bd5a]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-b534ac60-8a8d-4184-a4ce-aba2c3c9bd5a]: exited"}}
[debug] [2022-08-12T13:53:14.927Z] [worker-us-central1-sendRoomNotification-b534ac60-8a8d-4184-a4ce-aba2c3c9bd5a]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-b534ac60-8a8d-4184-a4ce-aba2c3c9bd5a]: FINISHED"}}
[debug] [2022-08-12T13:54:00.514Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-08-12T13:54:00.514Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-08-12T13:54:00.514Z] Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0 {"metadata":{"emulator":{"name":"functions"},"message":"Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0"}}
[debug] [2022-08-12T13:54:00.514Z] [worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0"}}
[debug] [2022-08-12T13:54:00.522Z] [worker-pool] addWorker(us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T13:54:00.522Z] [worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1"}}
[debug] [2022-08-12T13:54:00.522Z] [worker-pool] submitWork(triggerId=us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T13:54:00.522Z] [worker-us-central1-sendRoomNotification-9f376d81-1957-4eb8-9184-26d4a0bd9fd4]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-9f376d81-1957-4eb8-9184-26d4a0bd9fd4]: BUSY"}}
[debug] [2022-08-12T13:54:01.752Z] [runtime-status] [13832] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [13832] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:54:01.755Z] [runtime-status] [13832] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [13832] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:54:01.756Z] [runtime-status] [13832] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [13832] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-08-12T13:54:01.757Z] [runtime-status] [13832] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [13832] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:54:01.810Z] [runtime-status] [13832] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [13832] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-08-12T13:54:01.811Z] [runtime-status] [13832] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [13832] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:54:01.812Z] [runtime-status] [13832] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [13832] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:54:01.813Z] [runtime-status] [13832] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [13832] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:54:01.814Z] [runtime-status] [13832] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [13832] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:54:01.814Z] [runtime-status] [13832] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [13832] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:54:01.814Z] [runtime-status] [13832] Functions runtime initialized. {"cwd":"C:\\Users\\pavil\\source\\repos\\pentia\\functions","node_version":"16.14.2"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [13832] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\",\"node_version\":\"16.14.2\"}"}}
[debug] [2022-08-12T13:54:01.817Z] [runtime-status] [13832] initializeApp(DEFAULT) {"storageBucket":"pentia-1e4eb.appspot.com","projectId":"pentia-1e4eb"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [13832] initializeApp(DEFAULT) {\"storageBucket\":\"pentia-1e4eb.appspot.com\",\"projectId\":\"pentia-1e4eb\"}"}}
[debug] [2022-08-12T13:54:01.818Z] [runtime-status] [13832] Beginning invocation function sendRoomNotification! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [13832] Beginning invocation function sendRoomNotification!"}}
[info] i  functions: Beginning execution of "sendRoomNotification" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Beginning execution of \"sendRoomNotification\""}}
[debug] [2022-08-12T13:54:01.819Z] [runtime-status] [13832] Running sendRoomNotification in signature event {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [13832] Running sendRoomNotification in signature event"}}
[debug] [2022-08-12T13:54:01.819Z] [runtime-status] [13832] ProcessBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/AunedH9pnxZiskvCApTp","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"P"},"createdAt":{"timestampValue":"2022-08-12T13:54:00.501Z"}},"createTime":"2022-08-12T13:54:00.505802Z","updateTime":"2022-08-12T13:54:00.505802Z"},"updateMask":{}},"context":{"eventId":"dd651cbb-b012-414c-b546-89bb5052c66a","timestamp":"2022-08-12T13:54:00.505Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/AunedH9pnxZiskvCApTp","service":"firestore.googleapis.com"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [13832] ProcessBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/AunedH9pnxZiskvCApTp\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"P\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T13:54:00.501Z\"}},\"createTime\":\"2022-08-12T13:54:00.505802Z\",\"updateTime\":\"2022-08-12T13:54:00.505802Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"dd651cbb-b012-414c-b546-89bb5052c66a\",\"timestamp\":\"2022-08-12T13:54:00.505Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/AunedH9pnxZiskvCApTp\",\"service\":\"firestore.googleapis.com\"}}}"}}
[debug] [2022-08-12T13:54:01.819Z] [runtime-status] [13832] ProcessBackground: lifting resource.name from resource {"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/AunedH9pnxZiskvCApTp","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [13832] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/AunedH9pnxZiskvCApTp\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2022-08-12T13:54:01.819Z] [runtime-status] [13832] RunBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/AunedH9pnxZiskvCApTp","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"P"},"createdAt":{"timestampValue":"2022-08-12T13:54:00.501Z"}},"createTime":"2022-08-12T13:54:00.505802Z","updateTime":"2022-08-12T13:54:00.505802Z"},"updateMask":{}},"context":{"eventId":"dd651cbb-b012-414c-b546-89bb5052c66a","timestamp":"2022-08-12T13:54:00.505Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/pentia-1e4eb/databases/(default)/documents/messages/AunedH9pnxZiskvCApTp"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [13832] RunBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/AunedH9pnxZiskvCApTp\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"P\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T13:54:00.501Z\"}},\"createTime\":\"2022-08-12T13:54:00.505802Z\",\"updateTime\":\"2022-08-12T13:54:00.505802Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"dd651cbb-b012-414c-b546-89bb5052c66a\",\"timestamp\":\"2022-08-12T13:54:00.505Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/AunedH9pnxZiskvCApTp\"}}"}}
[debug] [2022-08-12T13:54:02.193Z] [runtime-status] [13832] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [13832] Ephemeral server survived."}}
[warn] !  functions: TypeError: subscribers is not iterable
    at C:\Users\pavil\source\repos\pentia\functions\lib\index.js:30:30
    at processTicksAndRejections (node:internal/process/task_queues:96:5)
    at async runFunction (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:565:9)
    at async runBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:577:5)
    at async processBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:560:5)
    at async invokeTrigger (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:641:13)
    at async handleMessage (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:741:9) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"TypeError: subscribers is not iterable\n    at C:\\Users\\pavil\\source\\repos\\pentia\\functions\\lib\\index.js:30:30\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async runFunction (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:565:9)\n    at async runBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:577:5)\n    at async processBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:560:5)\n    at async invokeTrigger (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:641:13)\n    at async handleMessage (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:741:9)"}}
[warn] !  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[debug] [2022-08-12T13:54:02.199Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-08-12T13:54:02.210Z] [worker-us-central1-sendRoomNotification-9f376d81-1957-4eb8-9184-26d4a0bd9fd4]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-9f376d81-1957-4eb8-9184-26d4a0bd9fd4]: exited"}}
[debug] [2022-08-12T13:54:02.210Z] [worker-us-central1-sendRoomNotification-9f376d81-1957-4eb8-9184-26d4a0bd9fd4]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-9f376d81-1957-4eb8-9184-26d4a0bd9fd4]: FINISHED"}}
[debug] [2022-08-12T13:54:16.136Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-08-12T13:54:16.136Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-08-12T13:54:16.136Z] Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0 {"metadata":{"emulator":{"name":"functions"},"message":"Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0"}}
[debug] [2022-08-12T13:54:16.136Z] [worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0"}}
[debug] [2022-08-12T13:54:16.146Z] [worker-pool] addWorker(us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T13:54:16.146Z] [worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1"}}
[debug] [2022-08-12T13:54:16.147Z] [worker-pool] submitWork(triggerId=us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T13:54:16.147Z] [worker-us-central1-sendRoomNotification-2e17ca74-209c-4214-94f1-e923345232f6]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-2e17ca74-209c-4214-94f1-e923345232f6]: BUSY"}}
[debug] [2022-08-12T13:54:17.209Z] [runtime-status] [9732] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [9732] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:54:17.211Z] [runtime-status] [9732] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [9732] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:54:17.211Z] [runtime-status] [9732] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [9732] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-08-12T13:54:17.212Z] [runtime-status] [9732] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [9732] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:54:17.254Z] [runtime-status] [9732] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [9732] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-08-12T13:54:17.254Z] [runtime-status] [9732] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [9732] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:54:17.255Z] [runtime-status] [9732] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [9732] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:54:17.256Z] [runtime-status] [9732] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [9732] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:54:17.257Z] [runtime-status] [9732] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [9732] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:54:17.257Z] [runtime-status] [9732] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [9732] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:54:17.257Z] [runtime-status] [9732] Functions runtime initialized. {"cwd":"C:\\Users\\pavil\\source\\repos\\pentia\\functions","node_version":"16.14.2"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [9732] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\",\"node_version\":\"16.14.2\"}"}}
[debug] [2022-08-12T13:54:17.259Z] [runtime-status] [9732] initializeApp(DEFAULT) {"storageBucket":"pentia-1e4eb.appspot.com","projectId":"pentia-1e4eb"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [9732] initializeApp(DEFAULT) {\"storageBucket\":\"pentia-1e4eb.appspot.com\",\"projectId\":\"pentia-1e4eb\"}"}}
[debug] [2022-08-12T13:54:17.260Z] [runtime-status] [9732] Beginning invocation function sendRoomNotification! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [9732] Beginning invocation function sendRoomNotification!"}}
[info] i  functions: Beginning execution of "sendRoomNotification" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Beginning execution of \"sendRoomNotification\""}}
[debug] [2022-08-12T13:54:17.261Z] [runtime-status] [9732] Running sendRoomNotification in signature event {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [9732] Running sendRoomNotification in signature event"}}
[debug] [2022-08-12T13:54:17.261Z] [runtime-status] [9732] ProcessBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/S7IQtvGhA9DjE2VUoebL","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"P"},"createdAt":{"timestampValue":"2022-08-12T13:54:16.117Z"}},"createTime":"2022-08-12T13:54:16.122235Z","updateTime":"2022-08-12T13:54:16.122235Z"},"updateMask":{}},"context":{"eventId":"c2e8f569-d4ff-4e08-ab1d-ed73ba42cc81","timestamp":"2022-08-12T13:54:16.122Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/S7IQtvGhA9DjE2VUoebL","service":"firestore.googleapis.com"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [9732] ProcessBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/S7IQtvGhA9DjE2VUoebL\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"P\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T13:54:16.117Z\"}},\"createTime\":\"2022-08-12T13:54:16.122235Z\",\"updateTime\":\"2022-08-12T13:54:16.122235Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"c2e8f569-d4ff-4e08-ab1d-ed73ba42cc81\",\"timestamp\":\"2022-08-12T13:54:16.122Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/S7IQtvGhA9DjE2VUoebL\",\"service\":\"firestore.googleapis.com\"}}}"}}
[debug] [2022-08-12T13:54:17.261Z] [runtime-status] [9732] ProcessBackground: lifting resource.name from resource {"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/S7IQtvGhA9DjE2VUoebL","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [9732] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/S7IQtvGhA9DjE2VUoebL\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2022-08-12T13:54:17.261Z] [runtime-status] [9732] RunBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/S7IQtvGhA9DjE2VUoebL","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"P"},"createdAt":{"timestampValue":"2022-08-12T13:54:16.117Z"}},"createTime":"2022-08-12T13:54:16.122235Z","updateTime":"2022-08-12T13:54:16.122235Z"},"updateMask":{}},"context":{"eventId":"c2e8f569-d4ff-4e08-ab1d-ed73ba42cc81","timestamp":"2022-08-12T13:54:16.122Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/pentia-1e4eb/databases/(default)/documents/messages/S7IQtvGhA9DjE2VUoebL"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [9732] RunBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/S7IQtvGhA9DjE2VUoebL\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"P\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T13:54:16.117Z\"}},\"createTime\":\"2022-08-12T13:54:16.122235Z\",\"updateTime\":\"2022-08-12T13:54:16.122235Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"c2e8f569-d4ff-4e08-ab1d-ed73ba42cc81\",\"timestamp\":\"2022-08-12T13:54:16.122Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/S7IQtvGhA9DjE2VUoebL\"}}"}}
[debug] [2022-08-12T13:54:17.598Z] [runtime-status] [9732] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [9732] Ephemeral server survived."}}
[warn] !  functions: TypeError: subscribers is not iterable
    at C:\Users\pavil\source\repos\pentia\functions\lib\index.js:30:30
    at processTicksAndRejections (node:internal/process/task_queues:96:5)
    at async runFunction (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:565:9)
    at async runBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:577:5)
    at async processBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:560:5)
    at async invokeTrigger (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:641:13)
    at async handleMessage (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:741:9) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"TypeError: subscribers is not iterable\n    at C:\\Users\\pavil\\source\\repos\\pentia\\functions\\lib\\index.js:30:30\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async runFunction (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:565:9)\n    at async runBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:577:5)\n    at async processBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:560:5)\n    at async invokeTrigger (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:641:13)\n    at async handleMessage (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:741:9)"}}
[warn] !  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[debug] [2022-08-12T13:54:17.603Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-08-12T13:54:17.614Z] [worker-us-central1-sendRoomNotification-2e17ca74-209c-4214-94f1-e923345232f6]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-2e17ca74-209c-4214-94f1-e923345232f6]: exited"}}
[debug] [2022-08-12T13:54:17.614Z] [worker-us-central1-sendRoomNotification-2e17ca74-209c-4214-94f1-e923345232f6]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-2e17ca74-209c-4214-94f1-e923345232f6]: FINISHED"}}
[debug] [2022-08-12T13:55:47.230Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-08-12T13:55:47.230Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-08-12T13:55:47.231Z] Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0 {"metadata":{"emulator":{"name":"functions"},"message":"Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0"}}
[debug] [2022-08-12T13:55:47.231Z] [worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0"}}
[debug] [2022-08-12T13:55:47.238Z] [worker-pool] addWorker(us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T13:55:47.238Z] [worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1"}}
[debug] [2022-08-12T13:55:47.238Z] [worker-pool] submitWork(triggerId=us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T13:55:47.238Z] [worker-us-central1-sendRoomNotification-047c8c44-1c08-4abb-9b31-c0605c664aa7]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-047c8c44-1c08-4abb-9b31-c0605c664aa7]: BUSY"}}
[debug] [2022-08-12T13:55:48.328Z] [runtime-status] [18544] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [18544] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:55:48.331Z] [runtime-status] [18544] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [18544] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:55:48.332Z] [runtime-status] [18544] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [18544] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-08-12T13:55:48.332Z] [runtime-status] [18544] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [18544] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:55:48.382Z] [runtime-status] [18544] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [18544] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-08-12T13:55:48.383Z] [runtime-status] [18544] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [18544] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:55:48.383Z] [runtime-status] [18544] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [18544] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:55:48.384Z] [runtime-status] [18544] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [18544] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:55:48.385Z] [runtime-status] [18544] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [18544] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:55:48.385Z] [runtime-status] [18544] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [18544] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:55:48.385Z] [runtime-status] [18544] Functions runtime initialized. {"cwd":"C:\\Users\\pavil\\source\\repos\\pentia\\functions","node_version":"16.14.2"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [18544] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\",\"node_version\":\"16.14.2\"}"}}
[debug] [2022-08-12T13:55:48.389Z] [runtime-status] [18544] initializeApp(DEFAULT) {"storageBucket":"pentia-1e4eb.appspot.com","projectId":"pentia-1e4eb"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [18544] initializeApp(DEFAULT) {\"storageBucket\":\"pentia-1e4eb.appspot.com\",\"projectId\":\"pentia-1e4eb\"}"}}
[debug] [2022-08-12T13:55:48.390Z] [runtime-status] [18544] Beginning invocation function sendRoomNotification! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [18544] Beginning invocation function sendRoomNotification!"}}
[info] i  functions: Beginning execution of "sendRoomNotification" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Beginning execution of \"sendRoomNotification\""}}
[debug] [2022-08-12T13:55:48.391Z] [runtime-status] [18544] Running sendRoomNotification in signature event {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [18544] Running sendRoomNotification in signature event"}}
[debug] [2022-08-12T13:55:48.391Z] [runtime-status] [18544] ProcessBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/SLWpt3jWKACEBZ0AoqU0","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"U"},"createdAt":{"timestampValue":"2022-08-12T13:55:47.222Z"}},"createTime":"2022-08-12T13:55:47.224317Z","updateTime":"2022-08-12T13:55:47.224317Z"},"updateMask":{}},"context":{"eventId":"5a254ee4-a126-45b9-8e7c-3ab5ff1f9559","timestamp":"2022-08-12T13:55:47.224Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/SLWpt3jWKACEBZ0AoqU0","service":"firestore.googleapis.com"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [18544] ProcessBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/SLWpt3jWKACEBZ0AoqU0\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"U\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T13:55:47.222Z\"}},\"createTime\":\"2022-08-12T13:55:47.224317Z\",\"updateTime\":\"2022-08-12T13:55:47.224317Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"5a254ee4-a126-45b9-8e7c-3ab5ff1f9559\",\"timestamp\":\"2022-08-12T13:55:47.224Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/SLWpt3jWKACEBZ0AoqU0\",\"service\":\"firestore.googleapis.com\"}}}"}}
[debug] [2022-08-12T13:55:48.391Z] [runtime-status] [18544] ProcessBackground: lifting resource.name from resource {"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/SLWpt3jWKACEBZ0AoqU0","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [18544] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/SLWpt3jWKACEBZ0AoqU0\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2022-08-12T13:55:48.391Z] [runtime-status] [18544] RunBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/SLWpt3jWKACEBZ0AoqU0","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"U"},"createdAt":{"timestampValue":"2022-08-12T13:55:47.222Z"}},"createTime":"2022-08-12T13:55:47.224317Z","updateTime":"2022-08-12T13:55:47.224317Z"},"updateMask":{}},"context":{"eventId":"5a254ee4-a126-45b9-8e7c-3ab5ff1f9559","timestamp":"2022-08-12T13:55:47.224Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/pentia-1e4eb/databases/(default)/documents/messages/SLWpt3jWKACEBZ0AoqU0"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [18544] RunBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/SLWpt3jWKACEBZ0AoqU0\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"U\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T13:55:47.222Z\"}},\"createTime\":\"2022-08-12T13:55:47.224317Z\",\"updateTime\":\"2022-08-12T13:55:47.224317Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"5a254ee4-a126-45b9-8e7c-3ab5ff1f9559\",\"timestamp\":\"2022-08-12T13:55:47.224Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/SLWpt3jWKACEBZ0AoqU0\"}}"}}
[debug] [2022-08-12T13:55:48.747Z] [runtime-status] [18544] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [18544] Ephemeral server survived."}}
[warn] !  functions: TypeError: subscribers is not iterable
    at C:\Users\pavil\source\repos\pentia\functions\lib\index.js:30:30
    at processTicksAndRejections (node:internal/process/task_queues:96:5)
    at async runFunction (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:565:9)
    at async runBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:577:5)
    at async processBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:560:5)
    at async invokeTrigger (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:641:13)
    at async handleMessage (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:741:9) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"TypeError: subscribers is not iterable\n    at C:\\Users\\pavil\\source\\repos\\pentia\\functions\\lib\\index.js:30:30\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async runFunction (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:565:9)\n    at async runBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:577:5)\n    at async processBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:560:5)\n    at async invokeTrigger (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:641:13)\n    at async handleMessage (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:741:9)"}}
[warn] !  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[debug] [2022-08-12T13:55:48.752Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-08-12T13:55:48.764Z] [worker-us-central1-sendRoomNotification-047c8c44-1c08-4abb-9b31-c0605c664aa7]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-047c8c44-1c08-4abb-9b31-c0605c664aa7]: exited"}}
[debug] [2022-08-12T13:55:48.764Z] [worker-us-central1-sendRoomNotification-047c8c44-1c08-4abb-9b31-c0605c664aa7]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-047c8c44-1c08-4abb-9b31-c0605c664aa7]: FINISHED"}}
[debug] [2022-08-12T13:57:31.116Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-08-12T13:57:31.116Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-08-12T13:57:31.116Z] Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0 {"metadata":{"emulator":{"name":"functions"},"message":"Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0"}}
[debug] [2022-08-12T13:57:31.117Z] [worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0"}}
[debug] [2022-08-12T13:57:31.124Z] [worker-pool] addWorker(us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T13:57:31.124Z] [worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1"}}
[debug] [2022-08-12T13:57:31.124Z] [worker-pool] submitWork(triggerId=us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T13:57:31.125Z] [worker-us-central1-sendRoomNotification-b18f4dfa-d989-4187-a89e-a1c47198987c]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-b18f4dfa-d989-4187-a89e-a1c47198987c]: BUSY"}}
[debug] [2022-08-12T13:57:32.241Z] [runtime-status] [12940] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [12940] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:57:32.243Z] [runtime-status] [12940] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [12940] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:57:32.243Z] [runtime-status] [12940] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [12940] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-08-12T13:57:32.244Z] [runtime-status] [12940] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [12940] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:57:32.292Z] [runtime-status] [12940] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [12940] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-08-12T13:57:32.292Z] [runtime-status] [12940] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [12940] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:57:32.293Z] [runtime-status] [12940] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [12940] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:57:32.294Z] [runtime-status] [12940] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [12940] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:57:32.295Z] [runtime-status] [12940] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [12940] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:57:32.295Z] [runtime-status] [12940] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [12940] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:57:32.295Z] [runtime-status] [12940] Functions runtime initialized. {"cwd":"C:\\Users\\pavil\\source\\repos\\pentia\\functions","node_version":"16.14.2"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [12940] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\",\"node_version\":\"16.14.2\"}"}}
[debug] [2022-08-12T13:57:32.298Z] [runtime-status] [12940] initializeApp(DEFAULT) {"storageBucket":"pentia-1e4eb.appspot.com","projectId":"pentia-1e4eb"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [12940] initializeApp(DEFAULT) {\"storageBucket\":\"pentia-1e4eb.appspot.com\",\"projectId\":\"pentia-1e4eb\"}"}}
[debug] [2022-08-12T13:57:32.299Z] [runtime-status] [12940] Beginning invocation function sendRoomNotification! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [12940] Beginning invocation function sendRoomNotification!"}}
[info] i  functions: Beginning execution of "sendRoomNotification" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Beginning execution of \"sendRoomNotification\""}}
[debug] [2022-08-12T13:57:32.300Z] [runtime-status] [12940] Running sendRoomNotification in signature event {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [12940] Running sendRoomNotification in signature event"}}
[debug] [2022-08-12T13:57:32.300Z] [runtime-status] [12940] ProcessBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/TStlH1YJTmnCiG53XMEx","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"C"},"createdAt":{"timestampValue":"2022-08-12T13:57:31.108Z"}},"createTime":"2022-08-12T13:57:31.110550Z","updateTime":"2022-08-12T13:57:31.110550Z"},"updateMask":{}},"context":{"eventId":"fb02b8eb-0312-4405-b317-03c00f2c971d","timestamp":"2022-08-12T13:57:31.110Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/TStlH1YJTmnCiG53XMEx","service":"firestore.googleapis.com"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [12940] ProcessBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/TStlH1YJTmnCiG53XMEx\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"C\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T13:57:31.108Z\"}},\"createTime\":\"2022-08-12T13:57:31.110550Z\",\"updateTime\":\"2022-08-12T13:57:31.110550Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"fb02b8eb-0312-4405-b317-03c00f2c971d\",\"timestamp\":\"2022-08-12T13:57:31.110Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/TStlH1YJTmnCiG53XMEx\",\"service\":\"firestore.googleapis.com\"}}}"}}
[debug] [2022-08-12T13:57:32.300Z] [runtime-status] [12940] ProcessBackground: lifting resource.name from resource {"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/TStlH1YJTmnCiG53XMEx","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [12940] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/TStlH1YJTmnCiG53XMEx\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2022-08-12T13:57:32.300Z] [runtime-status] [12940] RunBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/TStlH1YJTmnCiG53XMEx","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"C"},"createdAt":{"timestampValue":"2022-08-12T13:57:31.108Z"}},"createTime":"2022-08-12T13:57:31.110550Z","updateTime":"2022-08-12T13:57:31.110550Z"},"updateMask":{}},"context":{"eventId":"fb02b8eb-0312-4405-b317-03c00f2c971d","timestamp":"2022-08-12T13:57:31.110Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/pentia-1e4eb/databases/(default)/documents/messages/TStlH1YJTmnCiG53XMEx"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [12940] RunBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/TStlH1YJTmnCiG53XMEx\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"C\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T13:57:31.108Z\"}},\"createTime\":\"2022-08-12T13:57:31.110550Z\",\"updateTime\":\"2022-08-12T13:57:31.110550Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"fb02b8eb-0312-4405-b317-03c00f2c971d\",\"timestamp\":\"2022-08-12T13:57:31.110Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/TStlH1YJTmnCiG53XMEx\"}}"}}
[debug] [2022-08-12T13:57:32.656Z] [runtime-status] [12940] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [12940] Ephemeral server survived."}}
[warn] !  functions: TypeError: subscribers is not iterable
    at C:\Users\pavil\source\repos\pentia\functions\lib\index.js:30:30
    at processTicksAndRejections (node:internal/process/task_queues:96:5)
    at async runFunction (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:565:9)
    at async runBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:577:5)
    at async processBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:560:5)
    at async invokeTrigger (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:641:13)
    at async handleMessage (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:741:9) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"TypeError: subscribers is not iterable\n    at C:\\Users\\pavil\\source\\repos\\pentia\\functions\\lib\\index.js:30:30\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async runFunction (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:565:9)\n    at async runBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:577:5)\n    at async processBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:560:5)\n    at async invokeTrigger (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:641:13)\n    at async handleMessage (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:741:9)"}}
[warn] !  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[debug] [2022-08-12T13:57:32.662Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-08-12T13:57:32.673Z] [worker-us-central1-sendRoomNotification-b18f4dfa-d989-4187-a89e-a1c47198987c]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-b18f4dfa-d989-4187-a89e-a1c47198987c]: exited"}}
[debug] [2022-08-12T13:57:32.673Z] [worker-us-central1-sendRoomNotification-b18f4dfa-d989-4187-a89e-a1c47198987c]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-b18f4dfa-d989-4187-a89e-a1c47198987c]: FINISHED"}}
[debug] [2022-08-12T13:59:54.415Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-08-12T13:59:54.416Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-08-12T13:59:54.416Z] Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0 {"metadata":{"emulator":{"name":"functions"},"message":"Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0"}}
[debug] [2022-08-12T13:59:54.416Z] [worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0"}}
[debug] [2022-08-12T13:59:54.423Z] [worker-pool] addWorker(us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T13:59:54.423Z] [worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1"}}
[debug] [2022-08-12T13:59:54.423Z] [worker-pool] submitWork(triggerId=us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T13:59:54.423Z] [worker-us-central1-sendRoomNotification-bb585130-a5f4-4b55-bf98-633200099129]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-bb585130-a5f4-4b55-bf98-633200099129]: BUSY"}}
[debug] [2022-08-12T13:59:55.532Z] [runtime-status] [5788] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [5788] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:59:55.534Z] [runtime-status] [5788] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [5788] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:59:55.534Z] [runtime-status] [5788] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [5788] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-08-12T13:59:55.535Z] [runtime-status] [5788] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [5788] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:59:55.583Z] [runtime-status] [5788] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [5788] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-08-12T13:59:55.583Z] [runtime-status] [5788] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [5788] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:59:55.584Z] [runtime-status] [5788] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [5788] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:59:55.585Z] [runtime-status] [5788] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [5788] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:59:55.586Z] [runtime-status] [5788] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [5788] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T13:59:55.586Z] [runtime-status] [5788] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [5788] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T13:59:55.586Z] [runtime-status] [5788] Functions runtime initialized. {"cwd":"C:\\Users\\pavil\\source\\repos\\pentia\\functions","node_version":"16.14.2"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [5788] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\",\"node_version\":\"16.14.2\"}"}}
[debug] [2022-08-12T13:59:55.589Z] [runtime-status] [5788] initializeApp(DEFAULT) {"storageBucket":"pentia-1e4eb.appspot.com","projectId":"pentia-1e4eb"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [5788] initializeApp(DEFAULT) {\"storageBucket\":\"pentia-1e4eb.appspot.com\",\"projectId\":\"pentia-1e4eb\"}"}}
[debug] [2022-08-12T13:59:55.590Z] [runtime-status] [5788] Beginning invocation function sendRoomNotification! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [5788] Beginning invocation function sendRoomNotification!"}}
[info] i  functions: Beginning execution of "sendRoomNotification" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Beginning execution of \"sendRoomNotification\""}}
[debug] [2022-08-12T13:59:55.591Z] [runtime-status] [5788] Running sendRoomNotification in signature event {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [5788] Running sendRoomNotification in signature event"}}
[debug] [2022-08-12T13:59:55.591Z] [runtime-status] [5788] ProcessBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/yvgqEtHpgd3bfH06heaj","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"J"},"createdAt":{"timestampValue":"2022-08-12T13:59:54.407Z"}},"createTime":"2022-08-12T13:59:54.409983Z","updateTime":"2022-08-12T13:59:54.409983Z"},"updateMask":{}},"context":{"eventId":"563b066c-4bd2-4948-ad9f-9edd3ce34c89","timestamp":"2022-08-12T13:59:54.409Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/yvgqEtHpgd3bfH06heaj","service":"firestore.googleapis.com"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [5788] ProcessBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/yvgqEtHpgd3bfH06heaj\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"J\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T13:59:54.407Z\"}},\"createTime\":\"2022-08-12T13:59:54.409983Z\",\"updateTime\":\"2022-08-12T13:59:54.409983Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"563b066c-4bd2-4948-ad9f-9edd3ce34c89\",\"timestamp\":\"2022-08-12T13:59:54.409Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/yvgqEtHpgd3bfH06heaj\",\"service\":\"firestore.googleapis.com\"}}}"}}
[debug] [2022-08-12T13:59:55.591Z] [runtime-status] [5788] ProcessBackground: lifting resource.name from resource {"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/yvgqEtHpgd3bfH06heaj","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [5788] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/yvgqEtHpgd3bfH06heaj\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2022-08-12T13:59:55.591Z] [runtime-status] [5788] RunBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/yvgqEtHpgd3bfH06heaj","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"J"},"createdAt":{"timestampValue":"2022-08-12T13:59:54.407Z"}},"createTime":"2022-08-12T13:59:54.409983Z","updateTime":"2022-08-12T13:59:54.409983Z"},"updateMask":{}},"context":{"eventId":"563b066c-4bd2-4948-ad9f-9edd3ce34c89","timestamp":"2022-08-12T13:59:54.409Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/pentia-1e4eb/databases/(default)/documents/messages/yvgqEtHpgd3bfH06heaj"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [5788] RunBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/yvgqEtHpgd3bfH06heaj\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"J\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T13:59:54.407Z\"}},\"createTime\":\"2022-08-12T13:59:54.409983Z\",\"updateTime\":\"2022-08-12T13:59:54.409983Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"563b066c-4bd2-4948-ad9f-9edd3ce34c89\",\"timestamp\":\"2022-08-12T13:59:54.409Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/yvgqEtHpgd3bfH06heaj\"}}"}}
[debug] [2022-08-12T13:59:55.972Z] [runtime-status] [5788] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [5788] Ephemeral server survived."}}
[warn] !  functions: TypeError: subscribers is not iterable
    at C:\Users\pavil\source\repos\pentia\functions\lib\index.js:30:30
    at processTicksAndRejections (node:internal/process/task_queues:96:5)
    at async runFunction (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:565:9)
    at async runBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:577:5)
    at async processBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:560:5)
    at async invokeTrigger (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:641:13)
    at async handleMessage (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:741:9) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"TypeError: subscribers is not iterable\n    at C:\\Users\\pavil\\source\\repos\\pentia\\functions\\lib\\index.js:30:30\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async runFunction (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:565:9)\n    at async runBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:577:5)\n    at async processBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:560:5)\n    at async invokeTrigger (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:641:13)\n    at async handleMessage (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:741:9)"}}
[warn] !  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[debug] [2022-08-12T13:59:55.978Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-08-12T13:59:55.988Z] [worker-us-central1-sendRoomNotification-bb585130-a5f4-4b55-bf98-633200099129]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-bb585130-a5f4-4b55-bf98-633200099129]: exited"}}
[debug] [2022-08-12T13:59:55.988Z] [worker-us-central1-sendRoomNotification-bb585130-a5f4-4b55-bf98-633200099129]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-bb585130-a5f4-4b55-bf98-633200099129]: FINISHED"}}
[debug] [2022-08-12T14:00:33.065Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-08-12T14:00:33.065Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-08-12T14:00:33.065Z] Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0 {"metadata":{"emulator":{"name":"functions"},"message":"Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0"}}
[debug] [2022-08-12T14:00:33.065Z] [worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0"}}
[debug] [2022-08-12T14:00:33.072Z] [worker-pool] addWorker(us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T14:00:33.073Z] [worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1"}}
[debug] [2022-08-12T14:00:33.073Z] [worker-pool] submitWork(triggerId=us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T14:00:33.073Z] [worker-us-central1-sendRoomNotification-cc87ecec-4ae4-4ed3-84c2-e5a707c81992]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-cc87ecec-4ae4-4ed3-84c2-e5a707c81992]: BUSY"}}
[debug] [2022-08-12T14:00:34.201Z] [runtime-status] [1004] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [1004] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:00:34.203Z] [runtime-status] [1004] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [1004] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:00:34.204Z] [runtime-status] [1004] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [1004] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-08-12T14:00:34.205Z] [runtime-status] [1004] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [1004] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:00:34.264Z] [runtime-status] [1004] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [1004] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-08-12T14:00:34.264Z] [runtime-status] [1004] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [1004] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T14:00:34.265Z] [runtime-status] [1004] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [1004] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:00:34.266Z] [runtime-status] [1004] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [1004] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:00:34.267Z] [runtime-status] [1004] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [1004] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:00:34.268Z] [runtime-status] [1004] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [1004] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T14:00:34.268Z] [runtime-status] [1004] Functions runtime initialized. {"cwd":"C:\\Users\\pavil\\source\\repos\\pentia\\functions","node_version":"16.14.2"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [1004] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\",\"node_version\":\"16.14.2\"}"}}
[debug] [2022-08-12T14:00:34.271Z] [runtime-status] [1004] initializeApp(DEFAULT) {"storageBucket":"pentia-1e4eb.appspot.com","projectId":"pentia-1e4eb"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [1004] initializeApp(DEFAULT) {\"storageBucket\":\"pentia-1e4eb.appspot.com\",\"projectId\":\"pentia-1e4eb\"}"}}
[debug] [2022-08-12T14:00:34.272Z] [runtime-status] [1004] Beginning invocation function sendRoomNotification! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [1004] Beginning invocation function sendRoomNotification!"}}
[info] i  functions: Beginning execution of "sendRoomNotification" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Beginning execution of \"sendRoomNotification\""}}
[debug] [2022-08-12T14:00:34.273Z] [runtime-status] [1004] Running sendRoomNotification in signature event {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [1004] Running sendRoomNotification in signature event"}}
[debug] [2022-08-12T14:00:34.273Z] [runtime-status] [1004] ProcessBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/LfomaNZDNr3yFcRCsqYQ","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"V"},"createdAt":{"timestampValue":"2022-08-12T14:00:33.058Z"}},"createTime":"2022-08-12T14:00:33.060494Z","updateTime":"2022-08-12T14:00:33.060494Z"},"updateMask":{}},"context":{"eventId":"71f41e02-ba6c-46c0-a90e-6b3642ae912d","timestamp":"2022-08-12T14:00:33.060Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/LfomaNZDNr3yFcRCsqYQ","service":"firestore.googleapis.com"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [1004] ProcessBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/LfomaNZDNr3yFcRCsqYQ\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"V\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T14:00:33.058Z\"}},\"createTime\":\"2022-08-12T14:00:33.060494Z\",\"updateTime\":\"2022-08-12T14:00:33.060494Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"71f41e02-ba6c-46c0-a90e-6b3642ae912d\",\"timestamp\":\"2022-08-12T14:00:33.060Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/LfomaNZDNr3yFcRCsqYQ\",\"service\":\"firestore.googleapis.com\"}}}"}}
[debug] [2022-08-12T14:00:34.273Z] [runtime-status] [1004] ProcessBackground: lifting resource.name from resource {"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/LfomaNZDNr3yFcRCsqYQ","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [1004] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/LfomaNZDNr3yFcRCsqYQ\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2022-08-12T14:00:34.274Z] [runtime-status] [1004] RunBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/LfomaNZDNr3yFcRCsqYQ","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"V"},"createdAt":{"timestampValue":"2022-08-12T14:00:33.058Z"}},"createTime":"2022-08-12T14:00:33.060494Z","updateTime":"2022-08-12T14:00:33.060494Z"},"updateMask":{}},"context":{"eventId":"71f41e02-ba6c-46c0-a90e-6b3642ae912d","timestamp":"2022-08-12T14:00:33.060Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/pentia-1e4eb/databases/(default)/documents/messages/LfomaNZDNr3yFcRCsqYQ"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [1004] RunBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/LfomaNZDNr3yFcRCsqYQ\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"V\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T14:00:33.058Z\"}},\"createTime\":\"2022-08-12T14:00:33.060494Z\",\"updateTime\":\"2022-08-12T14:00:33.060494Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"71f41e02-ba6c-46c0-a90e-6b3642ae912d\",\"timestamp\":\"2022-08-12T14:00:33.060Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/LfomaNZDNr3yFcRCsqYQ\"}}"}}
[debug] [2022-08-12T14:00:34.700Z] [runtime-status] [1004] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [1004] Ephemeral server survived."}}
[warn] !  functions: TypeError: subscribers is not iterable
    at C:\Users\pavil\source\repos\pentia\functions\lib\index.js:30:30
    at processTicksAndRejections (node:internal/process/task_queues:96:5)
    at async runFunction (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:565:9)
    at async runBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:577:5)
    at async processBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:560:5)
    at async invokeTrigger (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:641:13)
    at async handleMessage (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:741:9) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"TypeError: subscribers is not iterable\n    at C:\\Users\\pavil\\source\\repos\\pentia\\functions\\lib\\index.js:30:30\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async runFunction (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:565:9)\n    at async runBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:577:5)\n    at async processBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:560:5)\n    at async invokeTrigger (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:641:13)\n    at async handleMessage (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:741:9)"}}
[warn] !  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[debug] [2022-08-12T14:00:34.706Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-08-12T14:00:34.717Z] [worker-us-central1-sendRoomNotification-cc87ecec-4ae4-4ed3-84c2-e5a707c81992]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-cc87ecec-4ae4-4ed3-84c2-e5a707c81992]: exited"}}
[debug] [2022-08-12T14:00:34.717Z] [worker-us-central1-sendRoomNotification-cc87ecec-4ae4-4ed3-84c2-e5a707c81992]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-cc87ecec-4ae4-4ed3-84c2-e5a707c81992]: FINISHED"}}
[debug] [2022-08-12T14:06:06.662Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-08-12T14:06:06.662Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-08-12T14:06:06.662Z] Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0 {"metadata":{"emulator":{"name":"functions"},"message":"Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0"}}
[debug] [2022-08-12T14:06:06.662Z] [worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0"}}
[debug] [2022-08-12T14:06:06.670Z] [worker-pool] addWorker(us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T14:06:06.670Z] [worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1"}}
[debug] [2022-08-12T14:06:06.671Z] [worker-pool] submitWork(triggerId=us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T14:06:06.671Z] [worker-us-central1-sendRoomNotification-a0655694-0681-410f-8cb8-8d7f60dd862c]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-a0655694-0681-410f-8cb8-8d7f60dd862c]: BUSY"}}
[debug] [2022-08-12T14:06:07.766Z] [runtime-status] [3488] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3488] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:06:07.769Z] [runtime-status] [3488] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3488] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:06:07.769Z] [runtime-status] [3488] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3488] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-08-12T14:06:07.770Z] [runtime-status] [3488] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3488] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:06:07.826Z] [runtime-status] [3488] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3488] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-08-12T14:06:07.826Z] [runtime-status] [3488] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3488] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T14:06:07.827Z] [runtime-status] [3488] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3488] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:06:07.829Z] [runtime-status] [3488] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3488] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:06:07.831Z] [runtime-status] [3488] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3488] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:06:07.831Z] [runtime-status] [3488] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3488] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T14:06:07.831Z] [runtime-status] [3488] Functions runtime initialized. {"cwd":"C:\\Users\\pavil\\source\\repos\\pentia\\functions","node_version":"16.14.2"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3488] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\",\"node_version\":\"16.14.2\"}"}}
[debug] [2022-08-12T14:06:07.835Z] [runtime-status] [3488] initializeApp(DEFAULT) {"storageBucket":"pentia-1e4eb.appspot.com","projectId":"pentia-1e4eb"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3488] initializeApp(DEFAULT) {\"storageBucket\":\"pentia-1e4eb.appspot.com\",\"projectId\":\"pentia-1e4eb\"}"}}
[debug] [2022-08-12T14:06:07.836Z] [runtime-status] [3488] Beginning invocation function sendRoomNotification! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3488] Beginning invocation function sendRoomNotification!"}}
[info] i  functions: Beginning execution of "sendRoomNotification" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Beginning execution of \"sendRoomNotification\""}}
[debug] [2022-08-12T14:06:07.837Z] [runtime-status] [3488] Running sendRoomNotification in signature event {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3488] Running sendRoomNotification in signature event"}}
[debug] [2022-08-12T14:06:07.838Z] [runtime-status] [3488] ProcessBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/mrc7cIAmYhDf6RZkMUyu","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"J"},"createdAt":{"timestampValue":"2022-08-12T14:06:06.654Z"}},"createTime":"2022-08-12T14:06:06.657772Z","updateTime":"2022-08-12T14:06:06.657772Z"},"updateMask":{}},"context":{"eventId":"52c817d4-d175-4ac7-aeca-bd1ce501ed75","timestamp":"2022-08-12T14:06:06.657Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/mrc7cIAmYhDf6RZkMUyu","service":"firestore.googleapis.com"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3488] ProcessBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/mrc7cIAmYhDf6RZkMUyu\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"J\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T14:06:06.654Z\"}},\"createTime\":\"2022-08-12T14:06:06.657772Z\",\"updateTime\":\"2022-08-12T14:06:06.657772Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"52c817d4-d175-4ac7-aeca-bd1ce501ed75\",\"timestamp\":\"2022-08-12T14:06:06.657Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/mrc7cIAmYhDf6RZkMUyu\",\"service\":\"firestore.googleapis.com\"}}}"}}
[debug] [2022-08-12T14:06:07.838Z] [runtime-status] [3488] ProcessBackground: lifting resource.name from resource {"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/mrc7cIAmYhDf6RZkMUyu","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3488] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/mrc7cIAmYhDf6RZkMUyu\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2022-08-12T14:06:07.838Z] [runtime-status] [3488] RunBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/mrc7cIAmYhDf6RZkMUyu","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"J"},"createdAt":{"timestampValue":"2022-08-12T14:06:06.654Z"}},"createTime":"2022-08-12T14:06:06.657772Z","updateTime":"2022-08-12T14:06:06.657772Z"},"updateMask":{}},"context":{"eventId":"52c817d4-d175-4ac7-aeca-bd1ce501ed75","timestamp":"2022-08-12T14:06:06.657Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/pentia-1e4eb/databases/(default)/documents/messages/mrc7cIAmYhDf6RZkMUyu"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3488] RunBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/mrc7cIAmYhDf6RZkMUyu\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/GoQNltCl8y8EUOFbM5Za\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"J\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T14:06:06.654Z\"}},\"createTime\":\"2022-08-12T14:06:06.657772Z\",\"updateTime\":\"2022-08-12T14:06:06.657772Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"52c817d4-d175-4ac7-aeca-bd1ce501ed75\",\"timestamp\":\"2022-08-12T14:06:06.657Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/mrc7cIAmYhDf6RZkMUyu\"}}"}}
[debug] [2022-08-12T14:06:08.230Z] [runtime-status] [3488] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [3488] Ephemeral server survived."}}
[warn] !  functions: TypeError: subscribers is not iterable
    at C:\Users\pavil\source\repos\pentia\functions\lib\index.js:30:30
    at processTicksAndRejections (node:internal/process/task_queues:96:5)
    at async runFunction (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:565:9)
    at async runBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:577:5)
    at async processBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:560:5)
    at async invokeTrigger (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:641:13)
    at async handleMessage (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:741:9) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"TypeError: subscribers is not iterable\n    at C:\\Users\\pavil\\source\\repos\\pentia\\functions\\lib\\index.js:30:30\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async runFunction (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:565:9)\n    at async runBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:577:5)\n    at async processBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:560:5)\n    at async invokeTrigger (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:641:13)\n    at async handleMessage (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:741:9)"}}
[warn] !  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[debug] [2022-08-12T14:06:08.235Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-08-12T14:06:08.247Z] [worker-us-central1-sendRoomNotification-a0655694-0681-410f-8cb8-8d7f60dd862c]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-a0655694-0681-410f-8cb8-8d7f60dd862c]: exited"}}
[debug] [2022-08-12T14:06:08.247Z] [worker-us-central1-sendRoomNotification-a0655694-0681-410f-8cb8-8d7f60dd862c]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-a0655694-0681-410f-8cb8-8d7f60dd862c]: FINISHED"}}
[debug] [2022-08-12T14:41:33.078Z] >>> [apiv2][query] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast [none]
[debug] [2022-08-12T14:41:33.078Z] >>> [apiv2][body] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast {"eventId":"35f9a6bf-3326-4e9f-99cb-4e55ea25e068","eventType":"providers/firebase.auth/eventTypes/user.delete","resource":{"name":"projects/pentia-1e4eb","service":"firebaseauth.googleapis.com"},"params":{},"timestamp":"2022-08-12T14:41:33.077Z","data":{"uid":"KmAOS3gtpn7stEaQXeb4A4KLVOgp","email":"paviln97dk@gmail.com","emailVerified":true,"displayName":"Jens Christensen","photoURL":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","metadata":{"lastSignInTime":"2022-08-12T13:51:16.272Z"},"customClaims":{},"providerData":[{"providerId":"google.com","rawId":"116740594955009033783","federatedId":"116740594955009033783","displayName":"Jens Christensen","photoUrl":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","email":"paviln97dk@gmail.com"}]}}
[debug] [2022-08-12T14:41:33.080Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-08-12T14:41:33.080Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-08-12T14:41:33.080Z] Accepted multicast request POST /functions/projects/pentia-1e4eb/trigger_multicast --> us-central1-removeUser-0 {"metadata":{"emulator":{"name":"functions"},"message":"Accepted multicast request POST /functions/projects/pentia-1e4eb/trigger_multicast --> us-central1-removeUser-0"}}
[debug] [2022-08-12T14:41:33.081Z] [worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0"}}
[debug] [2022-08-12T14:41:33.090Z] [worker-pool] addWorker(us-central1-removeUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-removeUser)"}}
[debug] [2022-08-12T14:41:33.090Z] [worker-pool] Adding worker with key us-central1-removeUser, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-removeUser, total=1"}}
[debug] [2022-08-12T14:41:33.090Z] [worker-pool] submitWork(triggerId=us-central1-removeUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-removeUser)"}}
[debug] [2022-08-12T14:41:33.090Z] [worker-us-central1-removeUser-129f602c-6e78-4e8d-8d03-88e0548d384b]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-removeUser-129f602c-6e78-4e8d-8d03-88e0548d384b]: BUSY"}}
[debug] [2022-08-12T14:41:33.093Z] <<< [apiv2][status] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast 200
[debug] [2022-08-12T14:41:33.094Z] <<< [apiv2][body] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2022-08-12T14:41:34.275Z] [runtime-status] [11968] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"[runtime-status] [11968] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:41:34.278Z] [runtime-status] [11968] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"[runtime-status] [11968] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:41:34.279Z] [runtime-status] [11968] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"[runtime-status] [11968] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-08-12T14:41:34.280Z] [runtime-status] [11968] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"[runtime-status] [11968] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:41:34.358Z] [runtime-status] [11968] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"[runtime-status] [11968] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-08-12T14:41:34.359Z] [runtime-status] [11968] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"[runtime-status] [11968] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T14:41:34.359Z] [runtime-status] [11968] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"[runtime-status] [11968] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:41:34.359Z] [runtime-status] [11968] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"[runtime-status] [11968] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:41:34.360Z] [runtime-status] [11968] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"[runtime-status] [11968] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:41:34.360Z] [runtime-status] [11968] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"[runtime-status] [11968] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T14:41:34.360Z] [runtime-status] [11968] Functions runtime initialized. {"cwd":"C:\\Users\\pavil\\source\\repos\\pentia\\functions","node_version":"16.14.2"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"[runtime-status] [11968] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\",\"node_version\":\"16.14.2\"}"}}
[debug] [2022-08-12T14:41:34.360Z] [runtime-status] [11968] initializeApp(DEFAULT) {"storageBucket":"pentia-1e4eb.appspot.com","projectId":"pentia-1e4eb"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"[runtime-status] [11968] initializeApp(DEFAULT) {\"storageBucket\":\"pentia-1e4eb.appspot.com\",\"projectId\":\"pentia-1e4eb\"}"}}
[debug] [2022-08-12T14:41:34.360Z] [runtime-status] [11968] Beginning invocation function removeUser! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"[runtime-status] [11968] Beginning invocation function removeUser!"}}
[info] i  functions: Beginning execution of "removeUser" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"Beginning execution of \"removeUser\""}}
[debug] [2022-08-12T14:41:34.361Z] [runtime-status] [11968] Running removeUser in signature event {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"[runtime-status] [11968] Running removeUser in signature event"}}
[debug] [2022-08-12T14:41:34.361Z] [runtime-status] [11968] ProcessBackground {"eventId":"35f9a6bf-3326-4e9f-99cb-4e55ea25e068","eventType":"providers/firebase.auth/eventTypes/user.delete","resource":{"name":"projects/pentia-1e4eb","service":"firebaseauth.googleapis.com"},"params":{},"timestamp":"2022-08-12T14:41:33.077Z","data":{"uid":"KmAOS3gtpn7stEaQXeb4A4KLVOgp","email":"paviln97dk@gmail.com","emailVerified":true,"displayName":"Jens Christensen","photoURL":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","metadata":{"lastSignInTime":"2022-08-12T13:51:16.272Z"},"customClaims":{},"providerData":[{"providerId":"google.com","rawId":"116740594955009033783","federatedId":"116740594955009033783","displayName":"Jens Christensen","photoUrl":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","email":"paviln97dk@gmail.com"}]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"[runtime-status] [11968] ProcessBackground {\"eventId\":\"35f9a6bf-3326-4e9f-99cb-4e55ea25e068\",\"eventType\":\"providers/firebase.auth/eventTypes/user.delete\",\"resource\":{\"name\":\"projects/pentia-1e4eb\",\"service\":\"firebaseauth.googleapis.com\"},\"params\":{},\"timestamp\":\"2022-08-12T14:41:33.077Z\",\"data\":{\"uid\":\"KmAOS3gtpn7stEaQXeb4A4KLVOgp\",\"email\":\"paviln97dk@gmail.com\",\"emailVerified\":true,\"displayName\":\"Jens Christensen\",\"photoURL\":\"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c\",\"metadata\":{\"lastSignInTime\":\"2022-08-12T13:51:16.272Z\"},\"customClaims\":{},\"providerData\":[{\"providerId\":\"google.com\",\"rawId\":\"116740594955009033783\",\"federatedId\":\"116740594955009033783\",\"displayName\":\"Jens Christensen\",\"photoUrl\":\"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c\",\"email\":\"paviln97dk@gmail.com\"}]}}"}}
[debug] [2022-08-12T14:41:34.361Z] [runtime-status] [11968] ProcessBackground: lifting resource.name from resource {"name":"projects/pentia-1e4eb","service":"firebaseauth.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"[runtime-status] [11968] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/pentia-1e4eb\",\"service\":\"firebaseauth.googleapis.com\"}"}}
[debug] [2022-08-12T14:41:34.362Z] [runtime-status] [11968] RunBackground {"data":{"uid":"KmAOS3gtpn7stEaQXeb4A4KLVOgp","email":"paviln97dk@gmail.com","emailVerified":true,"displayName":"Jens Christensen","photoURL":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","metadata":{"lastSignInTime":"2022-08-12T13:51:16.272Z"},"customClaims":{},"providerData":[{"providerId":"google.com","rawId":"116740594955009033783","federatedId":"116740594955009033783","displayName":"Jens Christensen","photoUrl":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","email":"paviln97dk@gmail.com"}]},"context":{"eventId":"35f9a6bf-3326-4e9f-99cb-4e55ea25e068","eventType":"providers/firebase.auth/eventTypes/user.delete","resource":"projects/pentia-1e4eb","params":{},"timestamp":"2022-08-12T14:41:33.077Z"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"[runtime-status] [11968] RunBackground {\"data\":{\"uid\":\"KmAOS3gtpn7stEaQXeb4A4KLVOgp\",\"email\":\"paviln97dk@gmail.com\",\"emailVerified\":true,\"displayName\":\"Jens Christensen\",\"photoURL\":\"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c\",\"metadata\":{\"lastSignInTime\":\"2022-08-12T13:51:16.272Z\"},\"customClaims\":{},\"providerData\":[{\"providerId\":\"google.com\",\"rawId\":\"116740594955009033783\",\"federatedId\":\"116740594955009033783\",\"displayName\":\"Jens Christensen\",\"photoUrl\":\"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c\",\"email\":\"paviln97dk@gmail.com\"}]},\"context\":{\"eventId\":\"35f9a6bf-3326-4e9f-99cb-4e55ea25e068\",\"eventType\":\"providers/firebase.auth/eventTypes/user.delete\",\"resource\":\"projects/pentia-1e4eb\",\"params\":{},\"timestamp\":\"2022-08-12T14:41:33.077Z\"}}"}}
[debug] [2022-08-12T14:41:34.745Z] [runtime-status] [11968] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"[runtime-status] [11968] Ephemeral server survived."}}
[info] i  functions: Finished "removeUser" in ~1s {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"Finished \"removeUser\" in ~1s"}}
[debug] [2022-08-12T14:41:34.746Z] [worker-us-central1-removeUser-129f602c-6e78-4e8d-8d03-88e0548d384b]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-removeUser-129f602c-6e78-4e8d-8d03-88e0548d384b]: IDLE"}}
[debug] [2022-08-12T14:41:34.746Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-08-12T14:41:44.584Z] >>> [apiv2][query] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast [none]
[debug] [2022-08-12T14:41:44.585Z] >>> [apiv2][body] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast {"eventId":"55e1f980-067a-4e41-af80-171669640f48","eventType":"providers/firebase.auth/eventTypes/user.create","resource":{"name":"projects/pentia-1e4eb","service":"firebaseauth.googleapis.com"},"params":{},"timestamp":"2022-08-12T14:41:44.584Z","data":{"uid":"HHdIdZRQ0QdM4fg4J9d4ATRnnSt7","email":"paviln97dk@gmail.com","emailVerified":true,"displayName":"Jens Christensen","photoURL":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","metadata":{"lastSignInTime":"2022-08-12T14:41:44.584Z"},"customClaims":{},"providerData":[{"providerId":"google.com","rawId":"116740594955009033783","federatedId":"116740594955009033783","displayName":"Jens Christensen","photoUrl":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","email":"paviln97dk@gmail.com"}]}}
[debug] [2022-08-12T14:41:44.589Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-08-12T14:41:44.589Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-08-12T14:41:44.589Z] Accepted multicast request POST /functions/projects/pentia-1e4eb/trigger_multicast --> us-central1-createUser-0 {"metadata":{"emulator":{"name":"functions"},"message":"Accepted multicast request POST /functions/projects/pentia-1e4eb/trigger_multicast --> us-central1-createUser-0"}}
[debug] [2022-08-12T14:41:44.589Z] [worker-pool] submitWork(triggerId=us-central1-createUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-createUser)"}}
[debug] [2022-08-12T14:41:44.589Z] [worker-us-central1-createUser-09b6bf9e-9af5-48bf-a44d-c03699d46f7a]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-createUser-09b6bf9e-9af5-48bf-a44d-c03699d46f7a]: BUSY"}}
[debug] [2022-08-12T14:41:44.594Z] <<< [apiv2][status] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast 200
[debug] [2022-08-12T14:41:44.594Z] <<< [apiv2][body] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2022-08-12T14:41:44.595Z] [runtime-status] [2992] Beginning invocation function createUser! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] Beginning invocation function createUser!"}}
[info] i  functions: Beginning execution of "createUser" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"Beginning execution of \"createUser\""}}
[debug] [2022-08-12T14:41:44.596Z] [runtime-status] [2992] Running createUser in signature event {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] Running createUser in signature event"}}
[debug] [2022-08-12T14:41:44.596Z] [runtime-status] [2992] ProcessBackground {"eventId":"55e1f980-067a-4e41-af80-171669640f48","eventType":"providers/firebase.auth/eventTypes/user.create","resource":{"name":"projects/pentia-1e4eb","service":"firebaseauth.googleapis.com"},"params":{},"timestamp":"2022-08-12T14:41:44.584Z","data":{"uid":"HHdIdZRQ0QdM4fg4J9d4ATRnnSt7","email":"paviln97dk@gmail.com","emailVerified":true,"displayName":"Jens Christensen","photoURL":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","metadata":{"lastSignInTime":"2022-08-12T14:41:44.584Z"},"customClaims":{},"providerData":[{"providerId":"google.com","rawId":"116740594955009033783","federatedId":"116740594955009033783","displayName":"Jens Christensen","photoUrl":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","email":"paviln97dk@gmail.com"}]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] ProcessBackground {\"eventId\":\"55e1f980-067a-4e41-af80-171669640f48\",\"eventType\":\"providers/firebase.auth/eventTypes/user.create\",\"resource\":{\"name\":\"projects/pentia-1e4eb\",\"service\":\"firebaseauth.googleapis.com\"},\"params\":{},\"timestamp\":\"2022-08-12T14:41:44.584Z\",\"data\":{\"uid\":\"HHdIdZRQ0QdM4fg4J9d4ATRnnSt7\",\"email\":\"paviln97dk@gmail.com\",\"emailVerified\":true,\"displayName\":\"Jens Christensen\",\"photoURL\":\"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c\",\"metadata\":{\"lastSignInTime\":\"2022-08-12T14:41:44.584Z\"},\"customClaims\":{},\"providerData\":[{\"providerId\":\"google.com\",\"rawId\":\"116740594955009033783\",\"federatedId\":\"116740594955009033783\",\"displayName\":\"Jens Christensen\",\"photoUrl\":\"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c\",\"email\":\"paviln97dk@gmail.com\"}]}}"}}
[debug] [2022-08-12T14:41:44.596Z] [runtime-status] [2992] ProcessBackground: lifting resource.name from resource {"name":"projects/pentia-1e4eb","service":"firebaseauth.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/pentia-1e4eb\",\"service\":\"firebaseauth.googleapis.com\"}"}}
[debug] [2022-08-12T14:41:44.596Z] [runtime-status] [2992] RunBackground {"data":{"uid":"HHdIdZRQ0QdM4fg4J9d4ATRnnSt7","email":"paviln97dk@gmail.com","emailVerified":true,"displayName":"Jens Christensen","photoURL":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","metadata":{"lastSignInTime":"2022-08-12T14:41:44.584Z"},"customClaims":{},"providerData":[{"providerId":"google.com","rawId":"116740594955009033783","federatedId":"116740594955009033783","displayName":"Jens Christensen","photoUrl":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","email":"paviln97dk@gmail.com"}]},"context":{"eventId":"55e1f980-067a-4e41-af80-171669640f48","eventType":"providers/firebase.auth/eventTypes/user.create","resource":"projects/pentia-1e4eb","params":{},"timestamp":"2022-08-12T14:41:44.584Z"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] RunBackground {\"data\":{\"uid\":\"HHdIdZRQ0QdM4fg4J9d4ATRnnSt7\",\"email\":\"paviln97dk@gmail.com\",\"emailVerified\":true,\"displayName\":\"Jens Christensen\",\"photoURL\":\"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c\",\"metadata\":{\"lastSignInTime\":\"2022-08-12T14:41:44.584Z\"},\"customClaims\":{},\"providerData\":[{\"providerId\":\"google.com\",\"rawId\":\"116740594955009033783\",\"federatedId\":\"116740594955009033783\",\"displayName\":\"Jens Christensen\",\"photoUrl\":\"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c\",\"email\":\"paviln97dk@gmail.com\"}]},\"context\":{\"eventId\":\"55e1f980-067a-4e41-af80-171669640f48\",\"eventType\":\"providers/firebase.auth/eventTypes/user.create\",\"resource\":\"projects/pentia-1e4eb\",\"params\":{},\"timestamp\":\"2022-08-12T14:41:44.584Z\"}}"}}
[debug] [2022-08-12T14:41:44.601Z] [runtime-status] [2992] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] Ephemeral server survived."}}
[info] i  functions: Finished "createUser" in ~1s {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"Finished \"createUser\" in ~1s"}}
[debug] [2022-08-12T14:41:44.603Z] [worker-us-central1-createUser-09b6bf9e-9af5-48bf-a44d-c03699d46f7a]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-createUser-09b6bf9e-9af5-48bf-a44d-c03699d46f7a]: IDLE"}}
[debug] [2022-08-12T14:41:44.603Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-08-12T14:49:54.398Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-08-12T14:49:54.398Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-08-12T14:49:54.398Z] Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0 {"metadata":{"emulator":{"name":"functions"},"message":"Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0"}}
[debug] [2022-08-12T14:49:54.406Z] [worker-pool] addWorker(us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T14:49:54.407Z] [worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1"}}
[debug] [2022-08-12T14:49:54.407Z] [worker-pool] submitWork(triggerId=us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T14:49:54.407Z] [worker-us-central1-sendRoomNotification-4cc3ce55-52d8-4689-9f3b-9701cc7fc1ef]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-4cc3ce55-52d8-4689-9f3b-9701cc7fc1ef]: BUSY"}}
[debug] [2022-08-12T14:49:55.559Z] [runtime-status] [7036] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [7036] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:49:55.561Z] [runtime-status] [7036] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [7036] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:49:55.562Z] [runtime-status] [7036] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [7036] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-08-12T14:49:55.562Z] [runtime-status] [7036] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [7036] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:49:55.608Z] [runtime-status] [7036] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [7036] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-08-12T14:49:55.608Z] [runtime-status] [7036] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [7036] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T14:49:55.609Z] [runtime-status] [7036] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [7036] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:49:55.610Z] [runtime-status] [7036] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [7036] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:49:55.611Z] [runtime-status] [7036] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [7036] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:49:55.611Z] [runtime-status] [7036] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [7036] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T14:49:55.611Z] [runtime-status] [7036] Functions runtime initialized. {"cwd":"C:\\Users\\pavil\\source\\repos\\pentia\\functions","node_version":"16.14.2"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [7036] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\",\"node_version\":\"16.14.2\"}"}}
[debug] [2022-08-12T14:49:55.614Z] [runtime-status] [7036] initializeApp(DEFAULT) {"storageBucket":"pentia-1e4eb.appspot.com","projectId":"pentia-1e4eb"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [7036] initializeApp(DEFAULT) {\"storageBucket\":\"pentia-1e4eb.appspot.com\",\"projectId\":\"pentia-1e4eb\"}"}}
[debug] [2022-08-12T14:49:55.614Z] [runtime-status] [7036] Beginning invocation function sendRoomNotification! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [7036] Beginning invocation function sendRoomNotification!"}}
[info] i  functions: Beginning execution of "sendRoomNotification" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Beginning execution of \"sendRoomNotification\""}}
[debug] [2022-08-12T14:49:55.615Z] [runtime-status] [7036] Running sendRoomNotification in signature event {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [7036] Running sendRoomNotification in signature event"}}
[debug] [2022-08-12T14:49:55.615Z] [runtime-status] [7036] ProcessBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/qoEOLGMtFWh0Kpae59WB","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/5t7OUFeSup4dhgWsAyWa"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"N"},"createdAt":{"timestampValue":"2022-08-12T14:49:54.386Z"}},"createTime":"2022-08-12T14:49:54.390129Z","updateTime":"2022-08-12T14:49:54.390129Z"},"updateMask":{}},"context":{"eventId":"eae0253b-b73e-4799-b0d3-17c8e9d93b92","timestamp":"2022-08-12T14:49:54.390Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/qoEOLGMtFWh0Kpae59WB","service":"firestore.googleapis.com"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [7036] ProcessBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/qoEOLGMtFWh0Kpae59WB\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/5t7OUFeSup4dhgWsAyWa\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"N\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T14:49:54.386Z\"}},\"createTime\":\"2022-08-12T14:49:54.390129Z\",\"updateTime\":\"2022-08-12T14:49:54.390129Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"eae0253b-b73e-4799-b0d3-17c8e9d93b92\",\"timestamp\":\"2022-08-12T14:49:54.390Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/qoEOLGMtFWh0Kpae59WB\",\"service\":\"firestore.googleapis.com\"}}}"}}
[debug] [2022-08-12T14:49:55.616Z] [runtime-status] [7036] ProcessBackground: lifting resource.name from resource {"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/qoEOLGMtFWh0Kpae59WB","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [7036] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/qoEOLGMtFWh0Kpae59WB\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2022-08-12T14:49:55.616Z] [runtime-status] [7036] RunBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/qoEOLGMtFWh0Kpae59WB","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/5t7OUFeSup4dhgWsAyWa"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"N"},"createdAt":{"timestampValue":"2022-08-12T14:49:54.386Z"}},"createTime":"2022-08-12T14:49:54.390129Z","updateTime":"2022-08-12T14:49:54.390129Z"},"updateMask":{}},"context":{"eventId":"eae0253b-b73e-4799-b0d3-17c8e9d93b92","timestamp":"2022-08-12T14:49:54.390Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/pentia-1e4eb/databases/(default)/documents/messages/qoEOLGMtFWh0Kpae59WB"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [7036] RunBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/qoEOLGMtFWh0Kpae59WB\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/5t7OUFeSup4dhgWsAyWa\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"N\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T14:49:54.386Z\"}},\"createTime\":\"2022-08-12T14:49:54.390129Z\",\"updateTime\":\"2022-08-12T14:49:54.390129Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"eae0253b-b73e-4799-b0d3-17c8e9d93b92\",\"timestamp\":\"2022-08-12T14:49:54.390Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/qoEOLGMtFWh0Kpae59WB\"}}"}}
[debug] [2022-08-12T14:49:56.081Z] [runtime-status] [7036] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [7036] Ephemeral server survived."}}
[warn] !  functions: TypeError: subscribers is not iterable
    at C:\Users\pavil\source\repos\pentia\functions\lib\index.js:30:30
    at processTicksAndRejections (node:internal/process/task_queues:96:5)
    at async runFunction (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:565:9)
    at async runBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:577:5)
    at async processBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:560:5)
    at async invokeTrigger (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:641:13)
    at async handleMessage (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:741:9) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"TypeError: subscribers is not iterable\n    at C:\\Users\\pavil\\source\\repos\\pentia\\functions\\lib\\index.js:30:30\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async runFunction (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:565:9)\n    at async runBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:577:5)\n    at async processBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:560:5)\n    at async invokeTrigger (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:641:13)\n    at async handleMessage (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:741:9)"}}
[warn] !  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[debug] [2022-08-12T14:49:56.086Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-08-12T14:49:56.099Z] [worker-us-central1-sendRoomNotification-4cc3ce55-52d8-4689-9f3b-9701cc7fc1ef]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-4cc3ce55-52d8-4689-9f3b-9701cc7fc1ef]: exited"}}
[debug] [2022-08-12T14:49:56.099Z] [worker-us-central1-sendRoomNotification-4cc3ce55-52d8-4689-9f3b-9701cc7fc1ef]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-4cc3ce55-52d8-4689-9f3b-9701cc7fc1ef]: FINISHED"}}
[debug] [2022-08-12T14:50:28.872Z] >>> [apiv2][query] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast [none]
[debug] [2022-08-12T14:50:28.872Z] >>> [apiv2][body] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast {"eventId":"86a4a557-22a5-4c1f-af01-fe33995a5f65","eventType":"providers/firebase.auth/eventTypes/user.delete","resource":{"name":"projects/pentia-1e4eb","service":"firebaseauth.googleapis.com"},"params":{},"timestamp":"2022-08-12T14:50:28.871Z","data":{"uid":"HHdIdZRQ0QdM4fg4J9d4ATRnnSt7","email":"paviln97dk@gmail.com","emailVerified":true,"displayName":"Jens Christensen","photoURL":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","metadata":{"lastSignInTime":"2022-08-12T14:42:10.302Z"},"customClaims":{},"providerData":[{"providerId":"google.com","rawId":"116740594955009033783","federatedId":"116740594955009033783","displayName":"Jens Christensen","photoUrl":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","email":"paviln97dk@gmail.com"}]}}
[debug] [2022-08-12T14:50:28.873Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-08-12T14:50:28.874Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-08-12T14:50:28.874Z] Accepted multicast request POST /functions/projects/pentia-1e4eb/trigger_multicast --> us-central1-removeUser-0 {"metadata":{"emulator":{"name":"functions"},"message":"Accepted multicast request POST /functions/projects/pentia-1e4eb/trigger_multicast --> us-central1-removeUser-0"}}
[debug] [2022-08-12T14:50:28.874Z] [worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0"}}
[debug] [2022-08-12T14:50:28.874Z] [worker-pool] submitWork(triggerId=us-central1-removeUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-removeUser)"}}
[debug] [2022-08-12T14:50:28.874Z] [worker-us-central1-removeUser-129f602c-6e78-4e8d-8d03-88e0548d384b]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-removeUser-129f602c-6e78-4e8d-8d03-88e0548d384b]: BUSY"}}
[debug] [2022-08-12T14:50:28.878Z] <<< [apiv2][status] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast 200
[debug] [2022-08-12T14:50:28.878Z] <<< [apiv2][body] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2022-08-12T14:50:28.878Z] [runtime-status] [11968] Beginning invocation function removeUser! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"[runtime-status] [11968] Beginning invocation function removeUser!"}}
[info] i  functions: Beginning execution of "removeUser" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"Beginning execution of \"removeUser\""}}
[debug] [2022-08-12T14:50:28.879Z] [runtime-status] [11968] Running removeUser in signature event {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"[runtime-status] [11968] Running removeUser in signature event"}}
[debug] [2022-08-12T14:50:28.879Z] [runtime-status] [11968] ProcessBackground {"eventId":"86a4a557-22a5-4c1f-af01-fe33995a5f65","eventType":"providers/firebase.auth/eventTypes/user.delete","resource":{"name":"projects/pentia-1e4eb","service":"firebaseauth.googleapis.com"},"params":{},"timestamp":"2022-08-12T14:50:28.871Z","data":{"uid":"HHdIdZRQ0QdM4fg4J9d4ATRnnSt7","email":"paviln97dk@gmail.com","emailVerified":true,"displayName":"Jens Christensen","photoURL":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","metadata":{"lastSignInTime":"2022-08-12T14:42:10.302Z"},"customClaims":{},"providerData":[{"providerId":"google.com","rawId":"116740594955009033783","federatedId":"116740594955009033783","displayName":"Jens Christensen","photoUrl":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","email":"paviln97dk@gmail.com"}]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"[runtime-status] [11968] ProcessBackground {\"eventId\":\"86a4a557-22a5-4c1f-af01-fe33995a5f65\",\"eventType\":\"providers/firebase.auth/eventTypes/user.delete\",\"resource\":{\"name\":\"projects/pentia-1e4eb\",\"service\":\"firebaseauth.googleapis.com\"},\"params\":{},\"timestamp\":\"2022-08-12T14:50:28.871Z\",\"data\":{\"uid\":\"HHdIdZRQ0QdM4fg4J9d4ATRnnSt7\",\"email\":\"paviln97dk@gmail.com\",\"emailVerified\":true,\"displayName\":\"Jens Christensen\",\"photoURL\":\"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c\",\"metadata\":{\"lastSignInTime\":\"2022-08-12T14:42:10.302Z\"},\"customClaims\":{},\"providerData\":[{\"providerId\":\"google.com\",\"rawId\":\"116740594955009033783\",\"federatedId\":\"116740594955009033783\",\"displayName\":\"Jens Christensen\",\"photoUrl\":\"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c\",\"email\":\"paviln97dk@gmail.com\"}]}}"}}
[debug] [2022-08-12T14:50:28.879Z] [runtime-status] [11968] ProcessBackground: lifting resource.name from resource {"name":"projects/pentia-1e4eb","service":"firebaseauth.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"[runtime-status] [11968] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/pentia-1e4eb\",\"service\":\"firebaseauth.googleapis.com\"}"}}
[debug] [2022-08-12T14:50:28.879Z] [runtime-status] [11968] RunBackground {"data":{"uid":"HHdIdZRQ0QdM4fg4J9d4ATRnnSt7","email":"paviln97dk@gmail.com","emailVerified":true,"displayName":"Jens Christensen","photoURL":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","metadata":{"lastSignInTime":"2022-08-12T14:42:10.302Z"},"customClaims":{},"providerData":[{"providerId":"google.com","rawId":"116740594955009033783","federatedId":"116740594955009033783","displayName":"Jens Christensen","photoUrl":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","email":"paviln97dk@gmail.com"}]},"context":{"eventId":"86a4a557-22a5-4c1f-af01-fe33995a5f65","eventType":"providers/firebase.auth/eventTypes/user.delete","resource":"projects/pentia-1e4eb","params":{},"timestamp":"2022-08-12T14:50:28.871Z"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"[runtime-status] [11968] RunBackground {\"data\":{\"uid\":\"HHdIdZRQ0QdM4fg4J9d4ATRnnSt7\",\"email\":\"paviln97dk@gmail.com\",\"emailVerified\":true,\"displayName\":\"Jens Christensen\",\"photoURL\":\"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c\",\"metadata\":{\"lastSignInTime\":\"2022-08-12T14:42:10.302Z\"},\"customClaims\":{},\"providerData\":[{\"providerId\":\"google.com\",\"rawId\":\"116740594955009033783\",\"federatedId\":\"116740594955009033783\",\"displayName\":\"Jens Christensen\",\"photoUrl\":\"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c\",\"email\":\"paviln97dk@gmail.com\"}]},\"context\":{\"eventId\":\"86a4a557-22a5-4c1f-af01-fe33995a5f65\",\"eventType\":\"providers/firebase.auth/eventTypes/user.delete\",\"resource\":\"projects/pentia-1e4eb\",\"params\":{},\"timestamp\":\"2022-08-12T14:50:28.871Z\"}}"}}
[debug] [2022-08-12T14:50:28.884Z] [runtime-status] [11968] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"[runtime-status] [11968] Ephemeral server survived."}}
[info] i  functions: Finished "removeUser" in ~1s {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-removeUser"},"extension":{},"message":"Finished \"removeUser\" in ~1s"}}
[debug] [2022-08-12T14:50:28.885Z] [worker-us-central1-removeUser-129f602c-6e78-4e8d-8d03-88e0548d384b]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-removeUser-129f602c-6e78-4e8d-8d03-88e0548d384b]: IDLE"}}
[debug] [2022-08-12T14:50:28.885Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-08-12T14:50:33.019Z] >>> [apiv2][query] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast [none]
[debug] [2022-08-12T14:50:33.019Z] >>> [apiv2][body] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast {"eventId":"cd92090e-960f-4d07-9d23-213473028e45","eventType":"providers/firebase.auth/eventTypes/user.create","resource":{"name":"projects/pentia-1e4eb","service":"firebaseauth.googleapis.com"},"params":{},"timestamp":"2022-08-12T14:50:33.019Z","data":{"uid":"auCKKgzDOKeSix5IpLs1nrmJWN9K","email":"paviln97dk@gmail.com","emailVerified":true,"displayName":"Jens Christensen","photoURL":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","metadata":{"lastSignInTime":"2022-08-12T14:50:33.019Z"},"customClaims":{},"providerData":[{"providerId":"google.com","rawId":"116740594955009033783","federatedId":"116740594955009033783","displayName":"Jens Christensen","photoUrl":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","email":"paviln97dk@gmail.com"}]}}
[debug] [2022-08-12T14:50:33.021Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-08-12T14:50:33.021Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-08-12T14:50:33.022Z] Accepted multicast request POST /functions/projects/pentia-1e4eb/trigger_multicast --> us-central1-createUser-0 {"metadata":{"emulator":{"name":"functions"},"message":"Accepted multicast request POST /functions/projects/pentia-1e4eb/trigger_multicast --> us-central1-createUser-0"}}
[debug] [2022-08-12T14:50:33.022Z] [worker-pool] submitWork(triggerId=us-central1-createUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-createUser)"}}
[debug] [2022-08-12T14:50:33.022Z] [worker-us-central1-createUser-09b6bf9e-9af5-48bf-a44d-c03699d46f7a]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-createUser-09b6bf9e-9af5-48bf-a44d-c03699d46f7a]: BUSY"}}
[debug] [2022-08-12T14:50:33.024Z] <<< [apiv2][status] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast 200
[debug] [2022-08-12T14:50:33.024Z] <<< [apiv2][body] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2022-08-12T14:50:33.025Z] [runtime-status] [2992] Beginning invocation function createUser! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] Beginning invocation function createUser!"}}
[info] i  functions: Beginning execution of "createUser" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"Beginning execution of \"createUser\""}}
[debug] [2022-08-12T14:50:33.025Z] [runtime-status] [2992] Running createUser in signature event {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] Running createUser in signature event"}}
[debug] [2022-08-12T14:50:33.025Z] [runtime-status] [2992] ProcessBackground {"eventId":"cd92090e-960f-4d07-9d23-213473028e45","eventType":"providers/firebase.auth/eventTypes/user.create","resource":{"name":"projects/pentia-1e4eb","service":"firebaseauth.googleapis.com"},"params":{},"timestamp":"2022-08-12T14:50:33.019Z","data":{"uid":"auCKKgzDOKeSix5IpLs1nrmJWN9K","email":"paviln97dk@gmail.com","emailVerified":true,"displayName":"Jens Christensen","photoURL":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","metadata":{"lastSignInTime":"2022-08-12T14:50:33.019Z"},"customClaims":{},"providerData":[{"providerId":"google.com","rawId":"116740594955009033783","federatedId":"116740594955009033783","displayName":"Jens Christensen","photoUrl":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","email":"paviln97dk@gmail.com"}]}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] ProcessBackground {\"eventId\":\"cd92090e-960f-4d07-9d23-213473028e45\",\"eventType\":\"providers/firebase.auth/eventTypes/user.create\",\"resource\":{\"name\":\"projects/pentia-1e4eb\",\"service\":\"firebaseauth.googleapis.com\"},\"params\":{},\"timestamp\":\"2022-08-12T14:50:33.019Z\",\"data\":{\"uid\":\"auCKKgzDOKeSix5IpLs1nrmJWN9K\",\"email\":\"paviln97dk@gmail.com\",\"emailVerified\":true,\"displayName\":\"Jens Christensen\",\"photoURL\":\"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c\",\"metadata\":{\"lastSignInTime\":\"2022-08-12T14:50:33.019Z\"},\"customClaims\":{},\"providerData\":[{\"providerId\":\"google.com\",\"rawId\":\"116740594955009033783\",\"federatedId\":\"116740594955009033783\",\"displayName\":\"Jens Christensen\",\"photoUrl\":\"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c\",\"email\":\"paviln97dk@gmail.com\"}]}}"}}
[debug] [2022-08-12T14:50:33.026Z] [runtime-status] [2992] ProcessBackground: lifting resource.name from resource {"name":"projects/pentia-1e4eb","service":"firebaseauth.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/pentia-1e4eb\",\"service\":\"firebaseauth.googleapis.com\"}"}}
[debug] [2022-08-12T14:50:33.026Z] [runtime-status] [2992] RunBackground {"data":{"uid":"auCKKgzDOKeSix5IpLs1nrmJWN9K","email":"paviln97dk@gmail.com","emailVerified":true,"displayName":"Jens Christensen","photoURL":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","metadata":{"lastSignInTime":"2022-08-12T14:50:33.019Z"},"customClaims":{},"providerData":[{"providerId":"google.com","rawId":"116740594955009033783","federatedId":"116740594955009033783","displayName":"Jens Christensen","photoUrl":"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c","email":"paviln97dk@gmail.com"}]},"context":{"eventId":"cd92090e-960f-4d07-9d23-213473028e45","eventType":"providers/firebase.auth/eventTypes/user.create","resource":"projects/pentia-1e4eb","params":{},"timestamp":"2022-08-12T14:50:33.019Z"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] RunBackground {\"data\":{\"uid\":\"auCKKgzDOKeSix5IpLs1nrmJWN9K\",\"email\":\"paviln97dk@gmail.com\",\"emailVerified\":true,\"displayName\":\"Jens Christensen\",\"photoURL\":\"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c\",\"metadata\":{\"lastSignInTime\":\"2022-08-12T14:50:33.019Z\"},\"customClaims\":{},\"providerData\":[{\"providerId\":\"google.com\",\"rawId\":\"116740594955009033783\",\"federatedId\":\"116740594955009033783\",\"displayName\":\"Jens Christensen\",\"photoUrl\":\"https://lh3.googleusercontent.com/a-/AFdZucqpANePNcvZjSIrZSzWQcCsazHStdV9lQUy6SihDw=s96-c\",\"email\":\"paviln97dk@gmail.com\"}]},\"context\":{\"eventId\":\"cd92090e-960f-4d07-9d23-213473028e45\",\"eventType\":\"providers/firebase.auth/eventTypes/user.create\",\"resource\":\"projects/pentia-1e4eb\",\"params\":{},\"timestamp\":\"2022-08-12T14:50:33.019Z\"}}"}}
[debug] [2022-08-12T14:50:33.029Z] [runtime-status] [2992] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"[runtime-status] [2992] Ephemeral server survived."}}
[info] i  functions: Finished "createUser" in ~1s {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUser"},"extension":{},"message":"Finished \"createUser\" in ~1s"}}
[debug] [2022-08-12T14:50:33.030Z] [worker-us-central1-createUser-09b6bf9e-9af5-48bf-a44d-c03699d46f7a]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-createUser-09b6bf9e-9af5-48bf-a44d-c03699d46f7a]: IDLE"}}
[debug] [2022-08-12T14:50:33.030Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-08-12T14:50:42.628Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-08-12T14:50:42.628Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-08-12T14:50:42.628Z] Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0 {"metadata":{"emulator":{"name":"functions"},"message":"Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0"}}
[debug] [2022-08-12T14:50:42.635Z] [worker-pool] addWorker(us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T14:50:42.635Z] [worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1"}}
[debug] [2022-08-12T14:50:42.635Z] [worker-pool] submitWork(triggerId=us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T14:50:42.635Z] [worker-us-central1-sendRoomNotification-74e36f05-1966-45da-838b-1f8b44322ae4]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-74e36f05-1966-45da-838b-1f8b44322ae4]: BUSY"}}
[debug] [2022-08-12T14:50:43.731Z] [runtime-status] [6672] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6672] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:50:43.733Z] [runtime-status] [6672] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6672] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:50:43.733Z] [runtime-status] [6672] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6672] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-08-12T14:50:43.734Z] [runtime-status] [6672] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6672] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:50:43.780Z] [runtime-status] [6672] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6672] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-08-12T14:50:43.781Z] [runtime-status] [6672] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6672] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T14:50:43.781Z] [runtime-status] [6672] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6672] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:50:43.782Z] [runtime-status] [6672] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6672] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:50:43.783Z] [runtime-status] [6672] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6672] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:50:43.783Z] [runtime-status] [6672] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6672] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T14:50:43.784Z] [runtime-status] [6672] Functions runtime initialized. {"cwd":"C:\\Users\\pavil\\source\\repos\\pentia\\functions","node_version":"16.14.2"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6672] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\",\"node_version\":\"16.14.2\"}"}}
[debug] [2022-08-12T14:50:43.787Z] [runtime-status] [6672] initializeApp(DEFAULT) {"storageBucket":"pentia-1e4eb.appspot.com","projectId":"pentia-1e4eb"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6672] initializeApp(DEFAULT) {\"storageBucket\":\"pentia-1e4eb.appspot.com\",\"projectId\":\"pentia-1e4eb\"}"}}
[debug] [2022-08-12T14:50:43.787Z] [runtime-status] [6672] Beginning invocation function sendRoomNotification! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6672] Beginning invocation function sendRoomNotification!"}}
[info] i  functions: Beginning execution of "sendRoomNotification" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Beginning execution of \"sendRoomNotification\""}}
[debug] [2022-08-12T14:50:43.788Z] [runtime-status] [6672] Running sendRoomNotification in signature event {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6672] Running sendRoomNotification in signature event"}}
[debug] [2022-08-12T14:50:43.788Z] [runtime-status] [6672] ProcessBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/l4it3BWtMh0PHcm7f10f","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/OQP0XvJsbXb5RuJCX3Vv"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"F"},"createdAt":{"timestampValue":"2022-08-12T14:50:42.620Z"}},"createTime":"2022-08-12T14:50:42.622889Z","updateTime":"2022-08-12T14:50:42.622889Z"},"updateMask":{}},"context":{"eventId":"debe15c3-377b-45e7-bc27-55a4b1bf726c","timestamp":"2022-08-12T14:50:42.622Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/l4it3BWtMh0PHcm7f10f","service":"firestore.googleapis.com"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6672] ProcessBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/l4it3BWtMh0PHcm7f10f\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/OQP0XvJsbXb5RuJCX3Vv\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"F\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T14:50:42.620Z\"}},\"createTime\":\"2022-08-12T14:50:42.622889Z\",\"updateTime\":\"2022-08-12T14:50:42.622889Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"debe15c3-377b-45e7-bc27-55a4b1bf726c\",\"timestamp\":\"2022-08-12T14:50:42.622Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/l4it3BWtMh0PHcm7f10f\",\"service\":\"firestore.googleapis.com\"}}}"}}
[debug] [2022-08-12T14:50:43.788Z] [runtime-status] [6672] ProcessBackground: lifting resource.name from resource {"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/l4it3BWtMh0PHcm7f10f","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6672] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/l4it3BWtMh0PHcm7f10f\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2022-08-12T14:50:43.788Z] [runtime-status] [6672] RunBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/l4it3BWtMh0PHcm7f10f","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/OQP0XvJsbXb5RuJCX3Vv"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"F"},"createdAt":{"timestampValue":"2022-08-12T14:50:42.620Z"}},"createTime":"2022-08-12T14:50:42.622889Z","updateTime":"2022-08-12T14:50:42.622889Z"},"updateMask":{}},"context":{"eventId":"debe15c3-377b-45e7-bc27-55a4b1bf726c","timestamp":"2022-08-12T14:50:42.622Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/pentia-1e4eb/databases/(default)/documents/messages/l4it3BWtMh0PHcm7f10f"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6672] RunBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/l4it3BWtMh0PHcm7f10f\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/OQP0XvJsbXb5RuJCX3Vv\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"F\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T14:50:42.620Z\"}},\"createTime\":\"2022-08-12T14:50:42.622889Z\",\"updateTime\":\"2022-08-12T14:50:42.622889Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"debe15c3-377b-45e7-bc27-55a4b1bf726c\",\"timestamp\":\"2022-08-12T14:50:42.622Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/l4it3BWtMh0PHcm7f10f\"}}"}}
[debug] [2022-08-12T14:50:44.164Z] [runtime-status] [6672] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6672] Ephemeral server survived."}}
[warn] !  functions: TypeError: subscribers is not iterable
    at C:\Users\pavil\source\repos\pentia\functions\lib\index.js:30:30
    at processTicksAndRejections (node:internal/process/task_queues:96:5)
    at async runFunction (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:565:9)
    at async runBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:577:5)
    at async processBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:560:5)
    at async invokeTrigger (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:641:13)
    at async handleMessage (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:741:9) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"TypeError: subscribers is not iterable\n    at C:\\Users\\pavil\\source\\repos\\pentia\\functions\\lib\\index.js:30:30\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async runFunction (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:565:9)\n    at async runBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:577:5)\n    at async processBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:560:5)\n    at async invokeTrigger (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:641:13)\n    at async handleMessage (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:741:9)"}}
[warn] !  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[debug] [2022-08-12T14:50:44.169Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-08-12T14:50:44.181Z] [worker-us-central1-sendRoomNotification-74e36f05-1966-45da-838b-1f8b44322ae4]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-74e36f05-1966-45da-838b-1f8b44322ae4]: exited"}}
[debug] [2022-08-12T14:50:44.181Z] [worker-us-central1-sendRoomNotification-74e36f05-1966-45da-838b-1f8b44322ae4]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-74e36f05-1966-45da-838b-1f8b44322ae4]: FINISHED"}}
[debug] [2022-08-12T14:50:58.876Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-08-12T14:50:58.876Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-08-12T14:50:58.876Z] Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0 {"metadata":{"emulator":{"name":"functions"},"message":"Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0"}}
[debug] [2022-08-12T14:50:58.876Z] [worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0"}}
[debug] [2022-08-12T14:50:58.885Z] [worker-pool] addWorker(us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T14:50:58.885Z] [worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1"}}
[debug] [2022-08-12T14:50:58.885Z] [worker-pool] submitWork(triggerId=us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T14:50:58.885Z] [worker-us-central1-sendRoomNotification-0f71f532-3bef-4912-bef4-f1eff05b8783]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-0f71f532-3bef-4912-bef4-f1eff05b8783]: BUSY"}}
[debug] [2022-08-12T14:50:59.961Z] [runtime-status] [10968] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [10968] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:50:59.963Z] [runtime-status] [10968] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [10968] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:50:59.963Z] [runtime-status] [10968] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [10968] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-08-12T14:50:59.964Z] [runtime-status] [10968] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [10968] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:51:00.009Z] [runtime-status] [10968] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [10968] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-08-12T14:51:00.009Z] [runtime-status] [10968] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [10968] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T14:51:00.010Z] [runtime-status] [10968] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [10968] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:51:00.011Z] [runtime-status] [10968] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [10968] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:51:00.012Z] [runtime-status] [10968] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [10968] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:51:00.012Z] [runtime-status] [10968] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [10968] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T14:51:00.012Z] [runtime-status] [10968] Functions runtime initialized. {"cwd":"C:\\Users\\pavil\\source\\repos\\pentia\\functions","node_version":"16.14.2"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [10968] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\",\"node_version\":\"16.14.2\"}"}}
[debug] [2022-08-12T14:51:00.016Z] [runtime-status] [10968] initializeApp(DEFAULT) {"storageBucket":"pentia-1e4eb.appspot.com","projectId":"pentia-1e4eb"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [10968] initializeApp(DEFAULT) {\"storageBucket\":\"pentia-1e4eb.appspot.com\",\"projectId\":\"pentia-1e4eb\"}"}}
[debug] [2022-08-12T14:51:00.017Z] [runtime-status] [10968] Beginning invocation function sendRoomNotification! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [10968] Beginning invocation function sendRoomNotification!"}}
[info] i  functions: Beginning execution of "sendRoomNotification" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Beginning execution of \"sendRoomNotification\""}}
[debug] [2022-08-12T14:51:00.018Z] [runtime-status] [10968] Running sendRoomNotification in signature event {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [10968] Running sendRoomNotification in signature event"}}
[debug] [2022-08-12T14:51:00.018Z] [runtime-status] [10968] ProcessBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/WXJQKNXTTYcpoluHXPWm","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/OQP0XvJsbXb5RuJCX3Vv"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"Oooo"},"createdAt":{"timestampValue":"2022-08-12T14:50:58.868Z"}},"createTime":"2022-08-12T14:50:58.871584Z","updateTime":"2022-08-12T14:50:58.871584Z"},"updateMask":{}},"context":{"eventId":"3ff9863e-1ea6-48cd-b8f2-c43be6b6e072","timestamp":"2022-08-12T14:50:58.871Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/WXJQKNXTTYcpoluHXPWm","service":"firestore.googleapis.com"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [10968] ProcessBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/WXJQKNXTTYcpoluHXPWm\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/OQP0XvJsbXb5RuJCX3Vv\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"Oooo\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T14:50:58.868Z\"}},\"createTime\":\"2022-08-12T14:50:58.871584Z\",\"updateTime\":\"2022-08-12T14:50:58.871584Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"3ff9863e-1ea6-48cd-b8f2-c43be6b6e072\",\"timestamp\":\"2022-08-12T14:50:58.871Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/WXJQKNXTTYcpoluHXPWm\",\"service\":\"firestore.googleapis.com\"}}}"}}
[debug] [2022-08-12T14:51:00.018Z] [runtime-status] [10968] ProcessBackground: lifting resource.name from resource {"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/WXJQKNXTTYcpoluHXPWm","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [10968] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/WXJQKNXTTYcpoluHXPWm\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2022-08-12T14:51:00.018Z] [runtime-status] [10968] RunBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/WXJQKNXTTYcpoluHXPWm","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/OQP0XvJsbXb5RuJCX3Vv"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"Oooo"},"createdAt":{"timestampValue":"2022-08-12T14:50:58.868Z"}},"createTime":"2022-08-12T14:50:58.871584Z","updateTime":"2022-08-12T14:50:58.871584Z"},"updateMask":{}},"context":{"eventId":"3ff9863e-1ea6-48cd-b8f2-c43be6b6e072","timestamp":"2022-08-12T14:50:58.871Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/pentia-1e4eb/databases/(default)/documents/messages/WXJQKNXTTYcpoluHXPWm"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [10968] RunBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/WXJQKNXTTYcpoluHXPWm\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/OQP0XvJsbXb5RuJCX3Vv\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"Oooo\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T14:50:58.868Z\"}},\"createTime\":\"2022-08-12T14:50:58.871584Z\",\"updateTime\":\"2022-08-12T14:50:58.871584Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"3ff9863e-1ea6-48cd-b8f2-c43be6b6e072\",\"timestamp\":\"2022-08-12T14:50:58.871Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/WXJQKNXTTYcpoluHXPWm\"}}"}}
[debug] [2022-08-12T14:51:00.387Z] [runtime-status] [10968] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [10968] Ephemeral server survived."}}
[warn] !  functions: TypeError: subscribers is not iterable
    at C:\Users\pavil\source\repos\pentia\functions\lib\index.js:30:30
    at processTicksAndRejections (node:internal/process/task_queues:96:5)
    at async runFunction (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:565:9)
    at async runBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:577:5)
    at async processBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:560:5)
    at async invokeTrigger (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:641:13)
    at async handleMessage (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:741:9) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"TypeError: subscribers is not iterable\n    at C:\\Users\\pavil\\source\\repos\\pentia\\functions\\lib\\index.js:30:30\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async runFunction (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:565:9)\n    at async runBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:577:5)\n    at async processBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:560:5)\n    at async invokeTrigger (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:641:13)\n    at async handleMessage (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:741:9)"}}
[warn] !  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[debug] [2022-08-12T14:51:00.393Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-08-12T14:51:00.405Z] [worker-us-central1-sendRoomNotification-0f71f532-3bef-4912-bef4-f1eff05b8783]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-0f71f532-3bef-4912-bef4-f1eff05b8783]: exited"}}
[debug] [2022-08-12T14:51:00.406Z] [worker-us-central1-sendRoomNotification-0f71f532-3bef-4912-bef4-f1eff05b8783]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-0f71f532-3bef-4912-bef4-f1eff05b8783]: FINISHED"}}
[debug] [2022-08-12T14:51:09.261Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-08-12T14:51:09.261Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-08-12T14:51:09.261Z] Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0 {"metadata":{"emulator":{"name":"functions"},"message":"Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0"}}
[debug] [2022-08-12T14:51:09.261Z] [worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0"}}
[debug] [2022-08-12T14:51:09.270Z] [worker-pool] addWorker(us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T14:51:09.270Z] [worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1"}}
[debug] [2022-08-12T14:51:09.270Z] [worker-pool] submitWork(triggerId=us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T14:51:09.271Z] [worker-us-central1-sendRoomNotification-a7077752-7132-4a3c-8b70-e8c20e702ca2]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-a7077752-7132-4a3c-8b70-e8c20e702ca2]: BUSY"}}
[debug] [2022-08-12T14:51:10.350Z] [runtime-status] [6372] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6372] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:51:10.352Z] [runtime-status] [6372] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6372] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:51:10.352Z] [runtime-status] [6372] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6372] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-08-12T14:51:10.354Z] [runtime-status] [6372] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6372] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:51:10.399Z] [runtime-status] [6372] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6372] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-08-12T14:51:10.399Z] [runtime-status] [6372] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6372] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T14:51:10.400Z] [runtime-status] [6372] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6372] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:51:10.401Z] [runtime-status] [6372] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6372] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:51:10.402Z] [runtime-status] [6372] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6372] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:51:10.402Z] [runtime-status] [6372] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6372] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T14:51:10.402Z] [runtime-status] [6372] Functions runtime initialized. {"cwd":"C:\\Users\\pavil\\source\\repos\\pentia\\functions","node_version":"16.14.2"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6372] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\",\"node_version\":\"16.14.2\"}"}}
[debug] [2022-08-12T14:51:10.405Z] [runtime-status] [6372] initializeApp(DEFAULT) {"storageBucket":"pentia-1e4eb.appspot.com","projectId":"pentia-1e4eb"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6372] initializeApp(DEFAULT) {\"storageBucket\":\"pentia-1e4eb.appspot.com\",\"projectId\":\"pentia-1e4eb\"}"}}
[debug] [2022-08-12T14:51:10.405Z] [runtime-status] [6372] Beginning invocation function sendRoomNotification! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6372] Beginning invocation function sendRoomNotification!"}}
[info] i  functions: Beginning execution of "sendRoomNotification" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Beginning execution of \"sendRoomNotification\""}}
[debug] [2022-08-12T14:51:10.406Z] [runtime-status] [6372] Running sendRoomNotification in signature event {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6372] Running sendRoomNotification in signature event"}}
[debug] [2022-08-12T14:51:10.406Z] [runtime-status] [6372] ProcessBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/t8ozzBQHBYPALNIVYOMo","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/OQP0XvJsbXb5RuJCX3Vv"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"Mm"},"createdAt":{"timestampValue":"2022-08-12T14:51:09.253Z"}},"createTime":"2022-08-12T14:51:09.255732Z","updateTime":"2022-08-12T14:51:09.255732Z"},"updateMask":{}},"context":{"eventId":"bf3123f3-5937-414f-a3d4-17a6a7f40ec1","timestamp":"2022-08-12T14:51:09.255Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/t8ozzBQHBYPALNIVYOMo","service":"firestore.googleapis.com"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6372] ProcessBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/t8ozzBQHBYPALNIVYOMo\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/OQP0XvJsbXb5RuJCX3Vv\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"Mm\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T14:51:09.253Z\"}},\"createTime\":\"2022-08-12T14:51:09.255732Z\",\"updateTime\":\"2022-08-12T14:51:09.255732Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"bf3123f3-5937-414f-a3d4-17a6a7f40ec1\",\"timestamp\":\"2022-08-12T14:51:09.255Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/t8ozzBQHBYPALNIVYOMo\",\"service\":\"firestore.googleapis.com\"}}}"}}
[debug] [2022-08-12T14:51:10.406Z] [runtime-status] [6372] ProcessBackground: lifting resource.name from resource {"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/t8ozzBQHBYPALNIVYOMo","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6372] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/t8ozzBQHBYPALNIVYOMo\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2022-08-12T14:51:10.407Z] [runtime-status] [6372] RunBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/t8ozzBQHBYPALNIVYOMo","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/OQP0XvJsbXb5RuJCX3Vv"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"Mm"},"createdAt":{"timestampValue":"2022-08-12T14:51:09.253Z"}},"createTime":"2022-08-12T14:51:09.255732Z","updateTime":"2022-08-12T14:51:09.255732Z"},"updateMask":{}},"context":{"eventId":"bf3123f3-5937-414f-a3d4-17a6a7f40ec1","timestamp":"2022-08-12T14:51:09.255Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/pentia-1e4eb/databases/(default)/documents/messages/t8ozzBQHBYPALNIVYOMo"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6372] RunBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/t8ozzBQHBYPALNIVYOMo\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/OQP0XvJsbXb5RuJCX3Vv\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"Mm\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T14:51:09.253Z\"}},\"createTime\":\"2022-08-12T14:51:09.255732Z\",\"updateTime\":\"2022-08-12T14:51:09.255732Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"bf3123f3-5937-414f-a3d4-17a6a7f40ec1\",\"timestamp\":\"2022-08-12T14:51:09.255Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/t8ozzBQHBYPALNIVYOMo\"}}"}}
[debug] [2022-08-12T14:51:10.759Z] [runtime-status] [6372] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [6372] Ephemeral server survived."}}
[warn] !  functions: TypeError: subscribers is not iterable
    at C:\Users\pavil\source\repos\pentia\functions\lib\index.js:30:30
    at processTicksAndRejections (node:internal/process/task_queues:96:5)
    at async runFunction (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:565:9)
    at async runBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:577:5)
    at async processBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:560:5)
    at async invokeTrigger (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:641:13)
    at async handleMessage (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:741:9) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"TypeError: subscribers is not iterable\n    at C:\\Users\\pavil\\source\\repos\\pentia\\functions\\lib\\index.js:30:30\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async runFunction (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:565:9)\n    at async runBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:577:5)\n    at async processBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:560:5)\n    at async invokeTrigger (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:641:13)\n    at async handleMessage (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:741:9)"}}
[warn] !  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[debug] [2022-08-12T14:51:10.765Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-08-12T14:51:10.776Z] [worker-us-central1-sendRoomNotification-a7077752-7132-4a3c-8b70-e8c20e702ca2]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-a7077752-7132-4a3c-8b70-e8c20e702ca2]: exited"}}
[debug] [2022-08-12T14:51:10.776Z] [worker-us-central1-sendRoomNotification-a7077752-7132-4a3c-8b70-e8c20e702ca2]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-a7077752-7132-4a3c-8b70-e8c20e702ca2]: FINISHED"}}
[debug] [2022-08-12T14:51:14.647Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-08-12T14:51:14.647Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-08-12T14:51:14.647Z] Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0 {"metadata":{"emulator":{"name":"functions"},"message":"Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0"}}
[debug] [2022-08-12T14:51:14.647Z] [worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0"}}
[debug] [2022-08-12T14:51:14.655Z] [worker-pool] addWorker(us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T14:51:14.656Z] [worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1"}}
[debug] [2022-08-12T14:51:14.656Z] [worker-pool] submitWork(triggerId=us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T14:51:14.656Z] [worker-us-central1-sendRoomNotification-0fd59263-b9b4-401c-85e6-02795230b37e]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-0fd59263-b9b4-401c-85e6-02795230b37e]: BUSY"}}
[debug] [2022-08-12T14:51:15.748Z] [runtime-status] [15172] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15172] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:51:15.750Z] [runtime-status] [15172] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15172] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:51:15.750Z] [runtime-status] [15172] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15172] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-08-12T14:51:15.751Z] [runtime-status] [15172] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15172] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:51:15.797Z] [runtime-status] [15172] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15172] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-08-12T14:51:15.797Z] [runtime-status] [15172] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15172] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T14:51:15.798Z] [runtime-status] [15172] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15172] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:51:15.799Z] [runtime-status] [15172] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15172] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:51:15.800Z] [runtime-status] [15172] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15172] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:51:15.800Z] [runtime-status] [15172] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15172] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T14:51:15.800Z] [runtime-status] [15172] Functions runtime initialized. {"cwd":"C:\\Users\\pavil\\source\\repos\\pentia\\functions","node_version":"16.14.2"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15172] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\",\"node_version\":\"16.14.2\"}"}}
[debug] [2022-08-12T14:51:15.803Z] [runtime-status] [15172] initializeApp(DEFAULT) {"storageBucket":"pentia-1e4eb.appspot.com","projectId":"pentia-1e4eb"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15172] initializeApp(DEFAULT) {\"storageBucket\":\"pentia-1e4eb.appspot.com\",\"projectId\":\"pentia-1e4eb\"}"}}
[debug] [2022-08-12T14:51:15.803Z] [runtime-status] [15172] Beginning invocation function sendRoomNotification! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15172] Beginning invocation function sendRoomNotification!"}}
[info] i  functions: Beginning execution of "sendRoomNotification" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Beginning execution of \"sendRoomNotification\""}}
[debug] [2022-08-12T14:51:15.804Z] [runtime-status] [15172] Running sendRoomNotification in signature event {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15172] Running sendRoomNotification in signature event"}}
[debug] [2022-08-12T14:51:15.805Z] [runtime-status] [15172] ProcessBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/VWNpwgqpTAqYRsLXDsSc","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/OQP0XvJsbXb5RuJCX3Vv"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"Mm"},"createdAt":{"timestampValue":"2022-08-12T14:51:14.636Z"}},"createTime":"2022-08-12T14:51:14.638752Z","updateTime":"2022-08-12T14:51:14.638752Z"},"updateMask":{}},"context":{"eventId":"8a88458c-034b-4434-8394-7de9c6a4c4bd","timestamp":"2022-08-12T14:51:14.638Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/VWNpwgqpTAqYRsLXDsSc","service":"firestore.googleapis.com"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15172] ProcessBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/VWNpwgqpTAqYRsLXDsSc\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/OQP0XvJsbXb5RuJCX3Vv\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"Mm\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T14:51:14.636Z\"}},\"createTime\":\"2022-08-12T14:51:14.638752Z\",\"updateTime\":\"2022-08-12T14:51:14.638752Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"8a88458c-034b-4434-8394-7de9c6a4c4bd\",\"timestamp\":\"2022-08-12T14:51:14.638Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/VWNpwgqpTAqYRsLXDsSc\",\"service\":\"firestore.googleapis.com\"}}}"}}
[debug] [2022-08-12T14:51:15.805Z] [runtime-status] [15172] ProcessBackground: lifting resource.name from resource {"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/VWNpwgqpTAqYRsLXDsSc","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15172] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/VWNpwgqpTAqYRsLXDsSc\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2022-08-12T14:51:15.805Z] [runtime-status] [15172] RunBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/VWNpwgqpTAqYRsLXDsSc","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/OQP0XvJsbXb5RuJCX3Vv"},"imageUrl":{"stringValue":""},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"Mm"},"createdAt":{"timestampValue":"2022-08-12T14:51:14.636Z"}},"createTime":"2022-08-12T14:51:14.638752Z","updateTime":"2022-08-12T14:51:14.638752Z"},"updateMask":{}},"context":{"eventId":"8a88458c-034b-4434-8394-7de9c6a4c4bd","timestamp":"2022-08-12T14:51:14.638Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/pentia-1e4eb/databases/(default)/documents/messages/VWNpwgqpTAqYRsLXDsSc"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15172] RunBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/VWNpwgqpTAqYRsLXDsSc\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/OQP0XvJsbXb5RuJCX3Vv\"},\"imageUrl\":{\"stringValue\":\"\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"Mm\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T14:51:14.636Z\"}},\"createTime\":\"2022-08-12T14:51:14.638752Z\",\"updateTime\":\"2022-08-12T14:51:14.638752Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"8a88458c-034b-4434-8394-7de9c6a4c4bd\",\"timestamp\":\"2022-08-12T14:51:14.638Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/VWNpwgqpTAqYRsLXDsSc\"}}"}}
[debug] [2022-08-12T14:51:16.155Z] [runtime-status] [15172] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [15172] Ephemeral server survived."}}
[warn] !  functions: TypeError: subscribers is not iterable
    at C:\Users\pavil\source\repos\pentia\functions\lib\index.js:30:30
    at processTicksAndRejections (node:internal/process/task_queues:96:5)
    at async runFunction (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:565:9)
    at async runBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:577:5)
    at async processBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:560:5)
    at async invokeTrigger (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:641:13)
    at async handleMessage (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:741:9) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"TypeError: subscribers is not iterable\n    at C:\\Users\\pavil\\source\\repos\\pentia\\functions\\lib\\index.js:30:30\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async runFunction (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:565:9)\n    at async runBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:577:5)\n    at async processBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:560:5)\n    at async invokeTrigger (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:641:13)\n    at async handleMessage (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:741:9)"}}
[warn] !  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[debug] [2022-08-12T14:51:16.161Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-08-12T14:51:16.172Z] [worker-us-central1-sendRoomNotification-0fd59263-b9b4-401c-85e6-02795230b37e]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-0fd59263-b9b4-401c-85e6-02795230b37e]: exited"}}
[debug] [2022-08-12T14:51:16.173Z] [worker-us-central1-sendRoomNotification-0fd59263-b9b4-401c-85e6-02795230b37e]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-0fd59263-b9b4-401c-85e6-02795230b37e]: FINISHED"}}
[debug] [2022-08-12T14:51:22.281Z] >>> [apiv2][query] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast [none]
[debug] [2022-08-12T14:51:22.281Z] >>> [apiv2][body] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast {"eventId":"1660315882280","timestamp":"2022-08-12T14:51:22.280Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/pentia-1e4eb.appspot.com/objects/images/8f63116e-af30-4e52-a385-2cddb3cf56e8","type":"storage#object"},"data":{"kind":"#storage#object","name":"images/8f63116e-af30-4e52-a385-2cddb3cf56e8","bucket":"pentia-1e4eb.appspot.com","generation":"1660315882108","metageneration":"1","contentType":"image/jpeg","contentDisposition":"inline","timeCreated":"2022-08-12T14:51:22.107Z","updated":"2022-08-12T14:51:22.134Z","storageClass":"STANDARD","size":"7749686","md5Hash":"Hbqsi3I0x/g4koHQbKy8gg==","etag":"uMz7GjJhJkWn+8t8MZOZlpox39k","cacheControl":"public, max-age=3600","contentEncoding":"identity","crc32c":"T5t8ZQ==","timeStorageClassUpdated":"2022-08-12T14:51:22.107Z","id":"pentia-1e4eb.appspot.com/images/8f63116e-af30-4e52-a385-2cddb3cf56e8/1660315882108","selfLink":"http://localhost:9199/storage/v1/b/pentia-1e4eb.appspot.com/o/images%2F8f63116e-af30-4e52-a385-2cddb3cf56e8","mediaLink":"http://localhost:9199/download/storage/v1/b/pentia-1e4eb.appspot.com/o/images%2F8f63116e-af30-4e52-a385-2cddb3cf56e8?generation=1660315882108&alt=media"}}
[debug] [2022-08-12T14:51:22.288Z] <<< [apiv2][status] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast 200
[debug] [2022-08-12T14:51:22.288Z] <<< [apiv2][body] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2022-08-12T14:51:22.288Z] >>> [apiv2][query] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast [none]
[debug] [2022-08-12T14:51:22.288Z] >>> [apiv2][body] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast {"specversion":"1","id":"16b9bb62-b3b9-4b23-a082-99c910585073","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/pentia-1e4eb.appspot.com/objects/images/8f63116e-af30-4e52-a385-2cddb3cf56e8","time":"2022-08-12T14:51:22.134Z","data":{"kind":"#storage#object","name":"images/8f63116e-af30-4e52-a385-2cddb3cf56e8","bucket":"pentia-1e4eb.appspot.com","generation":"1660315882108","metageneration":"1","contentType":"image/jpeg","contentDisposition":"inline","timeCreated":"2022-08-12T14:51:22.107Z","updated":"2022-08-12T14:51:22.134Z","storageClass":"STANDARD","size":"7749686","md5Hash":"Hbqsi3I0x/g4koHQbKy8gg==","etag":"uMz7GjJhJkWn+8t8MZOZlpox39k","cacheControl":"public, max-age=3600","contentEncoding":"identity","crc32c":"T5t8ZQ==","timeStorageClassUpdated":"2022-08-12T14:51:22.107Z","id":"pentia-1e4eb.appspot.com/images/8f63116e-af30-4e52-a385-2cddb3cf56e8/1660315882108","selfLink":"http://localhost:9199/storage/v1/b/pentia-1e4eb.appspot.com/o/images%2F8f63116e-af30-4e52-a385-2cddb3cf56e8","mediaLink":"http://localhost:9199/download/storage/v1/b/pentia-1e4eb.appspot.com/o/images%2F8f63116e-af30-4e52-a385-2cddb3cf56e8?generation=1660315882108&alt=media"}}
[debug] [2022-08-12T14:51:22.291Z] <<< [apiv2][status] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast 200
[debug] [2022-08-12T14:51:22.291Z] <<< [apiv2][body] POST http://localhost:5001/functions/projects/pentia-1e4eb/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2022-08-12T14:51:22.347Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-08-12T14:51:22.347Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-08-12T14:51:22.347Z] Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0 {"metadata":{"emulator":{"name":"functions"},"message":"Accepted request POST /functions/projects/pentia-1e4eb/triggers/us-central1-sendRoomNotification-0 --> us-central1-sendRoomNotification-0"}}
[debug] [2022-08-12T14:51:22.347Z] [worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-sendRoomNotification: 1 --> 0"}}
[debug] [2022-08-12T14:51:22.357Z] [worker-pool] addWorker(us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T14:51:22.357Z] [worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sendRoomNotification, total=1"}}
[debug] [2022-08-12T14:51:22.357Z] [worker-pool] submitWork(triggerId=us-central1-sendRoomNotification) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitWork(triggerId=us-central1-sendRoomNotification)"}}
[debug] [2022-08-12T14:51:22.357Z] [worker-us-central1-sendRoomNotification-381045d1-7096-4f07-bf82-3e2ff6195194]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-381045d1-7096-4f07-bf82-3e2ff6195194]: BUSY"}}
[debug] [2022-08-12T14:51:23.462Z] [runtime-status] [17124] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17124] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:51:23.464Z] [runtime-status] [17124] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17124] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:51:23.464Z] [runtime-status] [17124] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17124] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2022-08-12T14:51:23.465Z] [runtime-status] [17124] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17124] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:51:23.509Z] [runtime-status] [17124] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17124] Checked functions.config() {\"config\":{}}"}}
[debug] [2022-08-12T14:51:23.509Z] [runtime-status] [17124] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17124] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T14:51:23.510Z] [runtime-status] [17124] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17124] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:51:23.511Z] [runtime-status] [17124] Resolved module firebase-admin {"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17124] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:51:23.512Z] [runtime-status] [17124] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.22.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-functions\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17124] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.22.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\index.js\"}"}}
[debug] [2022-08-12T14:51:23.512Z] [runtime-status] [17124] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"10.3.0","resolution":"C:\\Users\\pavil\\source\\repos\\pentia\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17124] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"10.3.0\",\"resolution\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2022-08-12T14:51:23.512Z] [runtime-status] [17124] Functions runtime initialized. {"cwd":"C:\\Users\\pavil\\source\\repos\\pentia\\functions","node_version":"16.14.2"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17124] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\pavil\\\\source\\\\repos\\\\pentia\\\\functions\",\"node_version\":\"16.14.2\"}"}}
[debug] [2022-08-12T14:51:23.514Z] [runtime-status] [17124] initializeApp(DEFAULT) {"storageBucket":"pentia-1e4eb.appspot.com","projectId":"pentia-1e4eb"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17124] initializeApp(DEFAULT) {\"storageBucket\":\"pentia-1e4eb.appspot.com\",\"projectId\":\"pentia-1e4eb\"}"}}
[debug] [2022-08-12T14:51:23.515Z] [runtime-status] [17124] Beginning invocation function sendRoomNotification! {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17124] Beginning invocation function sendRoomNotification!"}}
[info] i  functions: Beginning execution of "sendRoomNotification" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Beginning execution of \"sendRoomNotification\""}}
[debug] [2022-08-12T14:51:23.516Z] [runtime-status] [17124] Running sendRoomNotification in signature event {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17124] Running sendRoomNotification in signature event"}}
[debug] [2022-08-12T14:51:23.516Z] [runtime-status] [17124] ProcessBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/t0MxfhuTMf3Pt8zcSEa2","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/OQP0XvJsbXb5RuJCX3Vv"},"imageUrl":{"stringValue":"http://10.0.2.2:9199/v0/b/pentia-1e4eb.appspot.com/o/images%2F8f63116e-af30-4e52-a385-2cddb3cf56e8?alt=media&token=74ecec95-5bf0-437c-a787-909a63f5c47e"},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"Mm"},"createdAt":{"timestampValue":"2022-08-12T14:51:22.337Z"}},"createTime":"2022-08-12T14:51:22.340272Z","updateTime":"2022-08-12T14:51:22.340272Z"},"updateMask":{}},"context":{"eventId":"0295281e-3d5a-4c0e-a20c-54f295fae14a","timestamp":"2022-08-12T14:51:22.340Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/t0MxfhuTMf3Pt8zcSEa2","service":"firestore.googleapis.com"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17124] ProcessBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/t0MxfhuTMf3Pt8zcSEa2\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/OQP0XvJsbXb5RuJCX3Vv\"},\"imageUrl\":{\"stringValue\":\"http://10.0.2.2:9199/v0/b/pentia-1e4eb.appspot.com/o/images%2F8f63116e-af30-4e52-a385-2cddb3cf56e8?alt=media&token=74ecec95-5bf0-437c-a787-909a63f5c47e\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"Mm\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T14:51:22.337Z\"}},\"createTime\":\"2022-08-12T14:51:22.340272Z\",\"updateTime\":\"2022-08-12T14:51:22.340272Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"0295281e-3d5a-4c0e-a20c-54f295fae14a\",\"timestamp\":\"2022-08-12T14:51:22.340Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/t0MxfhuTMf3Pt8zcSEa2\",\"service\":\"firestore.googleapis.com\"}}}"}}
[debug] [2022-08-12T14:51:23.516Z] [runtime-status] [17124] ProcessBackground: lifting resource.name from resource {"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/t0MxfhuTMf3Pt8zcSEa2","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17124] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/t0MxfhuTMf3Pt8zcSEa2\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2022-08-12T14:51:23.516Z] [runtime-status] [17124] RunBackground {"data":{"value":{"name":"projects/pentia-1e4eb/databases/(default)/documents/messages/t0MxfhuTMf3Pt8zcSEa2","fields":{"userRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/users/OQP0XvJsbXb5RuJCX3Vv"},"imageUrl":{"stringValue":"http://10.0.2.2:9199/v0/b/pentia-1e4eb.appspot.com/o/images%2F8f63116e-af30-4e52-a385-2cddb3cf56e8?alt=media&token=74ecec95-5bf0-437c-a787-909a63f5c47e"},"roomRef":{"referenceValue":"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP"},"text":{"stringValue":"Mm"},"createdAt":{"timestampValue":"2022-08-12T14:51:22.337Z"}},"createTime":"2022-08-12T14:51:22.340272Z","updateTime":"2022-08-12T14:51:22.340272Z"},"updateMask":{}},"context":{"eventId":"0295281e-3d5a-4c0e-a20c-54f295fae14a","timestamp":"2022-08-12T14:51:22.340Z","eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/pentia-1e4eb/databases/(default)/documents/messages/t0MxfhuTMf3Pt8zcSEa2"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17124] RunBackground {\"data\":{\"value\":{\"name\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/t0MxfhuTMf3Pt8zcSEa2\",\"fields\":{\"userRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/users/OQP0XvJsbXb5RuJCX3Vv\"},\"imageUrl\":{\"stringValue\":\"http://10.0.2.2:9199/v0/b/pentia-1e4eb.appspot.com/o/images%2F8f63116e-af30-4e52-a385-2cddb3cf56e8?alt=media&token=74ecec95-5bf0-437c-a787-909a63f5c47e\"},\"roomRef\":{\"referenceValue\":\"projects/pentia-1e4eb/databases/(default)/documents/rooms/o71LHUrlHvyaA5FjEqwP\"},\"text\":{\"stringValue\":\"Mm\"},\"createdAt\":{\"timestampValue\":\"2022-08-12T14:51:22.337Z\"}},\"createTime\":\"2022-08-12T14:51:22.340272Z\",\"updateTime\":\"2022-08-12T14:51:22.340272Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"0295281e-3d5a-4c0e-a20c-54f295fae14a\",\"timestamp\":\"2022-08-12T14:51:22.340Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/pentia-1e4eb/databases/(default)/documents/messages/t0MxfhuTMf3Pt8zcSEa2\"}}"}}
[debug] [2022-08-12T14:51:23.842Z] [runtime-status] [17124] Ephemeral server survived. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"[runtime-status] [17124] Ephemeral server survived."}}
[warn] !  functions: TypeError: subscribers is not iterable
    at C:\Users\pavil\source\repos\pentia\functions\lib\index.js:30:30
    at processTicksAndRejections (node:internal/process/task_queues:96:5)
    at async runFunction (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:565:9)
    at async runBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:577:5)
    at async processBackground (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:560:5)
    at async invokeTrigger (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:641:13)
    at async handleMessage (C:\Users\pavil\AppData\Roaming\nvm\v16.14.2\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:741:9) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"TypeError: subscribers is not iterable\n    at C:\\Users\\pavil\\source\\repos\\pentia\\functions\\lib\\index.js:30:30\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async runFunction (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:565:9)\n    at async runBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:577:5)\n    at async processBackground (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:560:5)\n    at async invokeTrigger (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:641:13)\n    at async handleMessage (C:\\Users\\pavil\\AppData\\Roaming\\nvm\\v16.14.2\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:741:9)"}}
[warn] !  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendRoomNotification"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[debug] [2022-08-12T14:51:23.847Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-08-12T14:51:23.858Z] [worker-us-central1-sendRoomNotification-381045d1-7096-4f07-bf82-3e2ff6195194]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-381045d1-7096-4f07-bf82-3e2ff6195194]: exited"}}
[debug] [2022-08-12T14:51:23.858Z] [worker-us-central1-sendRoomNotification-381045d1-7096-4f07-bf82-3e2ff6195194]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-sendRoomNotification-381045d1-7096-4f07-bf82-3e2ff6195194]: FINISHED"}}
